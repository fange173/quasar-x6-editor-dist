"use strict";(self["webpackChunkquasar_x6_editor"]=self["webpackChunkquasar_x6_editor"]||[]).push([[436],{5436:(e,a,l)=>{l.r(a),l.d(a,{default:()=>Wl});var t=l(3673);function o(e,a,l,o,n,s){const i=(0,t.up)("X6Editor");return(0,t.wg)(),(0,t.j4)(i)}const n=(0,t.Uk)("查看"),s=(0,t.Uk)("配置"),i=(0,t.Uk)("添加"),d=(0,t.Uk)("删除"),c=(0,t.Uk)("查看"),r=(0,t.Uk)("删除"),u=(0,t.Uk)("撤销"),p=(0,t.Uk)("重做"),m=(0,t.Uk)("查看"),f=(0,t.Uk)("导出"),w=(0,t.Uk)("更多"),g=(0,t.Uk)("清空");function h(e,a,l,o,h,v){const b=(0,t.up)("LeftDrawer"),k=(0,t.up)("RightDrawer"),y=(0,t.up)("q-item-section"),_=(0,t.up)("q-item"),x=(0,t.up)("q-separator"),C=(0,t.up)("q-list"),W=(0,t.up)("q-icon"),D=(0,t.up)("q-menu"),q=(0,t.up)("q-page"),U=(0,t.up)("ToolBar"),N=(0,t.up)("HelpDialog"),Z=(0,t.up)("CodeDialog"),V=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.Wm)(b,{showLeftDrawer:e.showLeftDrawer},null,8,["showLeftDrawer"]),(0,t.Wm)(k,{ref:"rightDrawer",showRightDrawer:e.showRightDrawer,flow:e.flow},null,8,["showRightDrawer","flow"]),(0,t.Wm)(q,{id:"container"},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{"touch-position":"","context-menu":""},{default:(0,t.w5)((()=>["node"==e.choiceType?((0,t.wg)(),(0,t.j4)(C,{key:0,dense:"",style:{"min-width":"100px"}},{default:(0,t.w5)((()=>[(0,t.wy)(((0,t.wg)(),(0,t.j4)(_,{clickable:""},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{onClick:e.showNode},{default:(0,t.w5)((()=>[n])),_:1},8,["onClick"])])),_:1})),[[V]]),(0,t.wy)(((0,t.wg)(),(0,t.j4)(_,{clickable:""},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{onClick:e.nodeSetting},{default:(0,t.w5)((()=>[s])),_:1},8,["onClick"])])),_:1})),[[V]]),(0,t.Wm)(x),(0,t.wy)(((0,t.wg)(),(0,t.j4)(_,{clickable:""},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{onClick:e.addNode},{default:(0,t.w5)((()=>[i])),_:1},8,["onClick"])])),_:1})),[[V]]),(0,t.Wm)(x),(0,t.wy)(((0,t.wg)(),(0,t.j4)(_,{clickable:""},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{onClick:e.deleteNode},{default:(0,t.w5)((()=>[d])),_:1},8,["onClick"])])),_:1})),[[V]])])),_:1})):(0,t.kq)("",!0),"edge"==e.choiceType?((0,t.wg)(),(0,t.j4)(C,{key:1,dense:"",style:{"min-width":"100px"}},{default:(0,t.w5)((()=>[(0,t.wy)(((0,t.wg)(),(0,t.j4)(_,{clickable:""},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{onClick:e.showEdge},{default:(0,t.w5)((()=>[c])),_:1},8,["onClick"])])),_:1})),[[V]]),(0,t.Wm)(x),(0,t.wy)(((0,t.wg)(),(0,t.j4)(_,{clickable:""},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{onClick:e.deleteEdge},{default:(0,t.w5)((()=>[r])),_:1},8,["onClick"])])),_:1})),[[V]])])),_:1})):(0,t.kq)("",!0),"blank"==e.choiceType?((0,t.wg)(),(0,t.j4)(C,{key:2,dense:"",style:{"min-width":"100px"}},{default:(0,t.w5)((()=>[(0,t.wy)(((0,t.wg)(),(0,t.j4)(_,{clickable:""},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{onClick:e.undo},{default:(0,t.w5)((()=>[u])),_:1},8,["onClick"])])),_:1})),[[V]]),(0,t.wy)(((0,t.wg)(),(0,t.j4)(_,{clickable:""},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{onClick:e.redo},{default:(0,t.w5)((()=>[p])),_:1},8,["onClick"])])),_:1})),[[V]]),(0,t.Wm)(x),(0,t.wy)(((0,t.wg)(),(0,t.j4)(_,{clickable:""},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{onClick:e.showData},{default:(0,t.w5)((()=>[m])),_:1},8,["onClick"])])),_:1})),[[V]]),(0,t.wy)(((0,t.wg)(),(0,t.j4)(_,{clickable:""},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{onClick:e.downloadData},{default:(0,t.w5)((()=>[f])),_:1},8,["onClick"])])),_:1})),[[V]]),(0,t.Wm)(x),(0,t.Wm)(_,{clickable:""},{default:(0,t.w5)((()=>[(0,t.Wm)(y,null,{default:(0,t.w5)((()=>[w])),_:1}),(0,t.Wm)(y,{side:""},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{name:"keyboard_arrow_right"})])),_:1}),(0,t.Wm)(D,{anchor:"top end",self:"top start"},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{dense:"",style:{"min-width":"100px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{clickable:""},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{onClick:e.refresh},{default:(0,t.w5)((()=>[g])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})):(0,t.kq)("",!0)])),_:1})])),_:1}),(0,t.Wm)(U,{zoom:e.zoom},null,8,["zoom"]),(0,t.Wm)(N,{openHelpDialog:e.openHelpDialog},null,8,["openHelpDialog"]),(0,t.Wm)(Z,{openCodeDialog:e.openCodeDialog,data:e.jsonData},null,8,["openCodeDialog","data"])])}var v=l(2623),b=l(4921),k=l(8825),y=l(1082),_=l(1959),x=l(2323);const C={id:"toolbar",class:"row items-center blur"},W=(0,t.Uk)(" 撤销 "),D=(0,t.Uk)(" 重做 "),q={class:"q-ml-sm",style:{"min-width":"40px"}},U=(0,t.Uk)(" 放大 (Ctrl + 滚轮向上) "),N=(0,t.Uk)(" 缩小 (Ctrl + 滚轮向下) "),Z=(0,t.Uk)(" 居中 "),V=(0,t.Uk)(" 显示网点 "),z=(0,t.Uk)(" 自动布局 "),I=(0,t.Uk)(" 查看 json "),T=(0,t.Uk)(" 导出 json "),F=(0,t.Uk)(" 运行 "),Q=(0,t.Uk)(" 帮助 ");function j(e,a,l,o,n,s){const i=(0,t.up)("q-tooltip"),d=(0,t.up)("q-btn"),c=(0,t.up)("q-separator");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t._)("div",C,[(0,t.Wm)(d,{flat:"",dense:"",icon:"undo",onClick:o.undo,class:"q-ml-xs"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{offset:[8,8]},{default:(0,t.w5)((()=>[W])),_:1})])),_:1},8,["onClick"]),(0,t.Wm)(d,{flat:"",dense:"",icon:"redo",onClick:o.redo},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{offset:[8,8]},{default:(0,t.w5)((()=>[D])),_:1})])),_:1},8,["onClick"]),(0,t.Wm)(c,{vertical:"",inset:"",class:"q-ml-xs"}),(0,t._)("div",q,(0,x.zw)(l.zoom)+"%",1),(0,t.Wm)(d,{flat:"",dense:"",icon:"zoom_in",onClick:o.zoomIn,class:"q-ml-xs"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{offset:[8,8]},{default:(0,t.w5)((()=>[U])),_:1})])),_:1},8,["onClick"]),(0,t.Wm)(d,{flat:"",dense:"",icon:"zoom_out",onClick:o.zoomOut},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{offset:[8,8]},{default:(0,t.w5)((()=>[N])),_:1})])),_:1},8,["onClick"]),(0,t.Wm)(c,{vertical:"",inset:"",class:"q-ml-xs"}),(0,t.Wm)(d,{flat:"",dense:"",icon:"center_focus_weak",onClick:o.centerContent,class:"q-ml-xs"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{offset:[8,8]},{default:(0,t.w5)((()=>[Z])),_:1})])),_:1},8,["onClick"]),(0,t.Wm)(d,{flat:"",dense:"",icon:"grid_4x4",onClick:o.shGird},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{offset:[8,8]},{default:(0,t.w5)((()=>[V])),_:1})])),_:1},8,["onClick"]),(0,t.Wm)(d,{flat:"",dense:"",icon:"auto_awesome_mosaic",onClick:o.layout},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{offset:[8,8]},{default:(0,t.w5)((()=>[z])),_:1})])),_:1},8,["onClick"]),(0,t.Wm)(c,{vertical:"",inset:"",class:"q-ml-xs"}),(0,t.Wm)(d,{flat:"",dense:"",icon:"visibility",onClick:o.showData,class:"q-ml-xs"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{offset:[8,8]},{default:(0,t.w5)((()=>[I])),_:1})])),_:1},8,["onClick"]),(0,t.Wm)(d,{flat:"",dense:"",icon:"download",onClick:o.downloadData},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{offset:[8,8]},{default:(0,t.w5)((()=>[T])),_:1})])),_:1},8,["onClick"]),(0,t.Wm)(c,{vertical:"",inset:"",class:"q-ml-xs"}),(0,t.Wm)(d,{flat:"",dense:"",color:"primary",icon:"directions_run",onClick:o.runWorkFlow,class:"q-ml-xs"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{offset:[8,8]},{default:(0,t.w5)((()=>[F])),_:1})])),_:1},8,["onClick"]),(0,t.Wm)(d,{flat:"",dense:"",icon:"help",onClick:o.help,class:"q-mr-xs"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{offset:[8,8]},{default:(0,t.w5)((()=>[Q])),_:1})])),_:1},8,["onClick"])])])}const H={props:{zoom:{type:Number}},setup(){const e=(0,t.FN)(),a=()=>{e.parent.proxy.undo()},l=()=>{e.parent.proxy.redo()},o=()=>{e.parent.proxy.zoomIn()},n=()=>{e.parent.proxy.zoomOut()},s=()=>{e.parent.proxy.centerContent()},i=()=>{e.parent.proxy.shGird()},d=()=>{e.parent.proxy.layout()},c=()=>{e.parent.proxy.showData()},r=()=>{e.parent.proxy.downloadData()},u=()=>{e.parent.proxy.runWorkFlow()},p=()=>{e.parent.proxy.help()};return{undo:a,redo:l,zoomIn:o,zoomOut:n,centerContent:s,shGird:i,layout:d,showData:c,downloadData:r,runWorkFlow:u,help:p}}};var S=l(4260),E=l(8240),R=l(8870),M=l(5869),L=l(7518),O=l.n(L);const B=(0,S.Z)(H,[["render",j]]),A=B;O()(H,"components",{QBtn:E.Z,QTooltip:R.Z,QSeparator:M.Z});var P=l(8880);const J=e=>((0,t.dD)("data-v-9e731ae6"),e=e(),(0,t.Cn)(),e),G=J((()=>(0,t._)("div",null,[(0,t._)("b",null,"组件库")],-1))),Y={class:"q-pa-md"},K={key:0,class:"row items-center node-label"},X=["onMousedown","onTouchstart"],$=J((()=>(0,t._)("div",{class:"left-side"},[(0,t._)("span",{class:"material-icons status-icons",style:{color:"#808080"}}," settings_outlined ")],-1))),ee={class:"center"},ae=J((()=>(0,t._)("div",{class:"right-side"},[(0,t._)("span",{class:"material-icons status-icons",style:{color:"#808080"}}," task ")],-1))),le={class:"row"},te=J((()=>(0,t._)("div",{class:"col-3"},[(0,t._)("strong",null,"name：")],-1))),oe={class:"col-9"},ne={class:"row"},se=J((()=>(0,t._)("div",{class:"col-3"},[(0,t._)("strong",null,"appUseCase：")],-1))),ie={class:"col-9"},de={class:"row"},ce=J((()=>(0,t._)("div",{class:"col-3"},[(0,t._)("strong",null,"cpuCores：")],-1))),re={class:"col-9"},ue={class:"q-mini-drawer-hide absolute",style:{top:"50%",right:"-16px"}},pe={class:"q-mini-drawer-hide absolute",style:{top:"50%",left:"0px"}};function me(e,a,l,o,n,s){const i=(0,t.up)("q-icon"),d=(0,t.up)("q-space"),c=(0,t.up)("q-btn"),r=(0,t.up)("q-bar"),u=(0,t.up)("q-input"),p=(0,t.up)("q-tooltip"),m=(0,t.up)("q-tree"),f=(0,t.up)("q-drawer");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.Wm)(f,{id:"leftDrawer",modelValue:o.showLeftDrawerCom,"onUpdate:modelValue":a[1]||(a[1]=e=>o.showLeftDrawerCom=e),"show-if-above":"",width:300,breakpoint:500,bordered:"",side:"left"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{id:"qBarTitle"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{name:"inventory"}),G,(0,t.Wm)(d),(0,t.Wm)(c,{dense:"",flat:"",icon:"close",onClick:o.shLeftDrawer},null,8,["onClick"])])),_:1}),(0,t._)("div",Y,[(0,t.Wm)(u,{outlined:"",dense:"",ref:"filterRef",modelValue:o.filter,"onUpdate:modelValue":a[0]||(a[0]=e=>o.filter=e)},{prepend:(0,t.w5)((()=>[(0,t.Wm)(i,{name:"search"})])),append:(0,t.w5)((()=>[""!==o.filter?((0,t.wg)(),(0,t.j4)(i,{key:0,name:"clear",class:"cursor-pointer",onClick:o.resetFilter},null,8,["onClick"])):(0,t.kq)("",!0)])),_:1},8,["modelValue"]),(0,t.Wm)(m,{nodes:o.nodeList,"node-key":"id",filter:o.filter,"filter-method":o.filterMethod,"no-nodes-label":"没有节点数据！","no-results-label":"没有找到相关节点！","default-expand-all":"",class:"q-pt-sm"},{"default-header":(0,t.w5)((e=>[e.node.icon?((0,t.wg)(),(0,t.iD)("div",K,[(0,t.Wm)(i,{name:e.node.icon,class:"q-mr-sm"},null,8,["name"]),(0,t._)("div",null,(0,x.zw)(e.node.data.name),1)])):((0,t.wg)(),(0,t.iD)("div",{key:1,class:"node",style:{cursor:"move"},onMousedown:a=>o.startDrag(a,e),onTouchstart:(0,P.iM)((a=>o.startDrag(a,e)),["stop"])},[$,(0,t._)("div",ee,(0,x.zw)(e.node.data.name),1),ae,(0,t.Wm)(p,{anchor:"center right",self:"center left",offset:[10,10]},{default:(0,t.w5)((()=>[(0,t._)("div",le,[te,(0,t._)("div",oe,(0,x.zw)(e.node.data.name),1)]),(0,t._)("div",ne,[se,(0,t._)("div",ie,(0,x.zw)(e.node.data.appUseCase),1)]),(0,t._)("div",de,[ce,(0,t._)("div",re,(0,x.zw)(e.node.data.cpuCores),1)])])),_:2},1024)],40,X))])),_:1},8,["nodes","filter","filter-method"])]),(0,t._)("div",ue,[(0,t.Wm)(c,{dense:"",round:"","text-color":"grey-7",unelevated:"",icon:"chevron_left",onClick:o.shLeftDrawer,style:{"z-index":"1"},class:"float-button blur"},null,8,["onClick"])])])),_:1},8,["modelValue"]),(0,t._)("div",pe,[(0,t.Wm)(c,{dense:"",round:"","text-color":"grey-7",unelevated:"",icon:"chevron_right",onClick:o.shLeftDrawer,style:{"z-index":"1","margin-top":"25px"},class:"float-button blur"},null,8,["onClick"])])])}const fe={props:{showLeftDrawer:{type:Boolean}},setup(e){const a=(0,t.FN)(),l={groups:{top:{position:"top",attrs:{circle:{r:4,magnet:!0,stroke:"#c2c8d5",strokeWidth:1.5,fill:"#fff"}}},bottom:{position:"bottom",attrs:{circle:{r:4,magnet:!0,stroke:"#c2c8d5",strokeWidth:1.5,fill:"#fff"}}}},items:[{group:"top"},{group:"bottom"}]},o=(0,_.iH)([{id:"Simulation",data:{name:"Simulation脚本"},icon:"flag",children:[{id:"Simulation1",shape:"default-node",data:{name:"Simulation1脚本",cpuCores:"4",appUseCase:"ab08ad37-055b-b368-58aa-037620228cf8",status:"default",htc:!1},ports:{...l}},{id:"Simulation2",shape:"default-node",data:{name:"Simulation2脚本",cpuCores:"4",appUseCase:"f30223f0-a215-4402-38ba-067a917b095d",status:"default",htc:!1},ports:{...l}},{id:"Simulation3",shape:"default-node",data:{name:"Simulation3脚本",cpuCores:"4",appUseCase:"c0121580-1097-418f-14be-170e474fb8d3",status:"default",htc:!1},ports:{...l}},{id:"Simulation4",shape:"default-node",data:{name:"Simulation4脚本",cpuCores:"4",appUseCase:"f4f1357b-1bfc-6797-5030-b9822d910e73",status:"default",htc:!1},ports:{...l}}]},{id:"Tool",data:{name:"Tool工具"},icon:"construction",children:[{id:"Tool1",shape:"default-node",data:{name:"Tool1工具",cpuCores:"4",appUseCase:"79737114-e574-8956-bd45-8cf3b9fc8c88",status:"default",htc:!1},ports:{...l}},{id:"Tool2",shape:"default-node",data:{name:"Tool2工具",cpuCores:"4",appUseCase:"75ca097e-b868-4250-885b-138a824f4982",status:"default",htc:!1},ports:{...l}},{id:"Tool3",shape:"default-node",data:{name:"Tool3工具",cpuCores:"4",appUseCase:"cec670a0-f6af-916f-7a52-ec9cbd102a9a",status:"default",htc:!1},ports:{...l}}]}]),n=(0,_.iH)(""),s=(0,_.iH)(null),i=(e,l)=>{a.parent.proxy.startDrag(e,l)},d=(0,t.Fl)((()=>e.showLeftDrawer)),c=()=>{a.parent.proxy.shLeftDrawer()},r=(e,a)=>-1!==e.data.name.indexOf(a);return{shLeftDrawer:c,showLeftDrawerCom:d,nodeList:o,filter:n,filterRef:s,resetFilter(){n.value="",s.value.focus()},startDrag:i,filterMethod:r}}};var we=l(2901),ge=l(846),he=l(4554),ve=l(2025),be=l(4842),ke=l(5551);const ye=(0,S.Z)(fe,[["render",me],["__scopeId","data-v-9e731ae6"]]),_e=ye;O()(fe,"components",{QDrawer:we.Z,QBar:ge.Z,QIcon:he.Z,QSpace:ve.Z,QBtn:E.Z,QInput:be.Z,QTree:ke.Z,QTooltip:R.Z});const xe=(0,t._)("div",null,[(0,t._)("b",null,"编辑")],-1),Ce={class:"q-mini-drawer-hide absolute",style:{top:"50%",left:"-16px"}},We={class:"q-mini-drawer-hide absolute",style:{top:"50%",right:"0px"}};function De(e,a,l,o,n,s){const i=(0,t.up)("q-icon"),d=(0,t.up)("q-space"),c=(0,t.up)("q-btn"),r=(0,t.up)("q-bar"),u=(0,t.up)("EditPanel"),p=(0,t.up)("q-drawer");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.Wm)(p,{id:"rightDrawer",modelValue:o.showRightDrawerCom,"onUpdate:modelValue":a[0]||(a[0]=e=>o.showRightDrawerCom=e),"show-if-above":"",width:300,breakpoint:500,bordered:"",side:"right"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{id:"qBarTitle"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{name:"edit"}),xe,(0,t.Wm)(d),(0,t.Wm)(c,{dense:"",flat:"",icon:"close",onClick:o.shRightDrawer},null,8,["onClick"])])),_:1}),(0,t.Wm)(u,{id:"edit",ref:"editPanel",flow:l.flow},null,8,["flow"]),(0,t._)("div",Ce,[(0,t.Wm)(c,{dense:"",round:"","text-color":"grey-7",unelevated:"",icon:"chevron_right",onClick:o.shRightDrawer,style:{"z-index":"1"},class:"float-button blur"},null,8,["onClick"])])])),_:1},8,["modelValue"]),(0,t._)("div",We,[(0,t.Wm)(c,{dense:"",round:"","text-color":"grey-7",unelevated:"",icon:"chevron_left",onClick:o.shRightDrawer,style:{"z-index":"1","margin-top":"25px"},class:"float-button blur"},null,8,["onClick"])])])}const qe=(0,t._)("div",{id:"titleBar"},"导航器",-1),Ue=(0,t._)("div",{id:"minimapContainer"},null,-1),Ne=[qe,Ue];function Ze(e,a,l,o,n,s){return(0,t.wg)(),(0,t.iD)("div",null,Ne)}const Ve={},ze=(0,S.Z)(Ve,[["render",Ze]]),Ie=ze,Te={key:0,class:"q-gutter-md q-pl-md q-pr-md q-pt-md"},Fe=(0,t._)("div",{class:"inputTitle row"},[(0,t._)("div",{class:"col-6"},"x"),(0,t._)("div",{class:"col-6 q-pl-sm"},"y")],-1),Qe={class:"row q-mt-xs"},je={class:"col-6 q-pr-xs"},He={class:"col-6 q-pl-xs"},Se=(0,t._)("div",{class:"inputTitle q-mt-sm"},"externalId",-1),Ee=(0,t._)("div",{class:"inputTitle q-mt-sm"},"cpuCores",-1),Re=(0,t._)("div",{class:"inputTitle q-mt-sm"},"appUseCase",-1),Me=(0,t._)("div",{class:"inputTitle q-mt-sm"},"name",-1),Le=(0,t._)("div",{class:"inputTitle q-mt-sm"},"status",-1),Oe={class:"select-text"},Be={class:"row",style:{"margin-left":"-4px"}},Ae=(0,t._)("div",{class:"inputTitle q-mt-sm"},"htc",-1),Pe={key:1,class:"q-gutter-md q-pl-md q-pr-md q-pt-md"},Je=(0,t._)("div",{class:"inputTitle q-mt-sm"},"source",-1),Ge=(0,t._)("div",{class:"inputTitle q-mt-sm"},"target",-1),Ye=(0,t._)("div",{class:"inputTitle q-mt-sm"},"fileDependencies",-1),Ke=(0,t.Uk)("targetAppFile"),Xe=(0,t.Uk)("dependencyAppFile"),$e=(0,t.Uk)("dependencyType"),ea=(0,t.Uk)("+ 添加文件"),aa={key:2,class:"q-gutter-md q-pl-md q-pr-md q-pt-md"},la=(0,t._)("div",{class:"inputTitle q-mt-sm"},"id",-1),ta=(0,t._)("div",{class:"inputTitle q-mt-sm"},"name",-1),oa=(0,t._)("div",{class:"inputTitle q-mt-sm"},"materialName",-1);function na(e,a,l,o,n,s){const i=(0,t.up)("q-input"),d=(0,t.up)("q-icon"),c=(0,t.up)("q-item-label"),r=(0,t.up)("q-item-section"),u=(0,t.up)("q-item"),p=(0,t.up)("q-select"),m=(0,t.up)("q-btn-toggle"),f=(0,t.up)("q-btn"),w=(0,t.up)("q-list"),g=(0,t.Q2)("ripple");return(0,t.wg)(),(0,t.iD)("div",null,["node"===o.clickType?((0,t.wg)(),(0,t.iD)("div",Te,[Fe,(0,t._)("div",Qe,[(0,t._)("div",je,[(0,t.Wm)(i,{dense:"",outlined:"",modelValue:o.clickNode.x,"onUpdate:modelValue":a[0]||(a[0]=e=>o.clickNode.x=e),readonly:""},null,8,["modelValue"])]),(0,t._)("div",He,[(0,t.Wm)(i,{dense:"",outlined:"",modelValue:o.clickNode.y,"onUpdate:modelValue":a[1]||(a[1]=e=>o.clickNode.y=e),readonly:""},null,8,["modelValue"])])]),Se,(0,t.Wm)(i,{dense:"",outlined:"",modelValue:o.clickNode.id,"onUpdate:modelValue":a[2]||(a[2]=e=>o.clickNode.id=e),class:"q-mt-xs",readonly:""},null,8,["modelValue"]),Ee,(0,t.Wm)(i,{dense:"",outlined:"",modelValue:o.clickNode.cpuCores,"onUpdate:modelValue":a[3]||(a[3]=e=>o.clickNode.cpuCores=e),class:"q-mt-xs"},null,8,["modelValue"]),Re,(0,t.Wm)(i,{dense:"",outlined:"",modelValue:o.clickNode.appUseCase,"onUpdate:modelValue":a[4]||(a[4]=e=>o.clickNode.appUseCase=e),class:"q-mt-xs"},null,8,["modelValue"]),Me,(0,t.Wm)(i,{dense:"",outlined:"",modelValue:o.clickNode.name,"onUpdate:modelValue":a[5]||(a[5]=e=>o.clickNode.name=e),class:"q-mt-xs"},null,8,["modelValue"]),Le,(0,t.Wm)(p,{dense:"",outlined:"",modelValue:o.clickNode.status,"onUpdate:modelValue":a[6]||(a[6]=e=>o.clickNode.status=e),options:["default","success","error","warning","running"],class:"q-mt-xs"},{prepend:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(d,{name:"task",style:{color:"#808080","font-size":"20px"}},null,512),[[P.F8,"default"===o.clickNode.status]]),(0,t.wy)((0,t.Wm)(d,{name:"check_circle_outline",style:{color:"green","font-size":"20px"}},null,512),[[P.F8,"success"===o.clickNode.status]]),(0,t.wy)((0,t.Wm)(d,{name:"cancel",style:{color:"red","font-size":"20px"}},null,512),[[P.F8,"error"===o.clickNode.status]]),(0,t.wy)((0,t.Wm)(d,{name:"error_outline",style:{color:"orange","font-size":"20px"}},null,512),[[P.F8,"warning"===o.clickNode.status]]),(0,t.wy)((0,t.Wm)(d,{name:"directions_run",style:{color:"blue","font-size":"20px"}},null,512),[[P.F8,"running"===o.clickNode.status]])])),selected:(0,t.w5)((()=>[(0,t._)("div",Oe,(0,x.zw)(o.clickNode.status),1)])),option:(0,t.w5)((e=>[(0,t.Wm)(u,(0,t.dG)(e.itemProps,(0,t.mx)(e.itemEvents)),{default:(0,t.w5)((()=>[(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t._)("span",Be,[(0,t.wy)((0,t.Wm)(d,{name:"task",class:"q-mr-sm",style:{color:"#808080","font-size":"20px"}},null,512),[[P.F8,"default"===e.opt]]),(0,t.wy)((0,t.Wm)(d,{name:"check_circle_outline",class:"q-mr-sm",style:{color:"green","font-size":"20px"}},null,512),[[P.F8,"success"===e.opt]]),(0,t.wy)((0,t.Wm)(d,{name:"cancel",class:"q-mr-sm",style:{color:"red","font-size":"20px"}},null,512),[[P.F8,"error"===e.opt]]),(0,t.wy)((0,t.Wm)(d,{name:"error_outline",class:"q-mr-sm",style:{color:"orange","font-size":"20px"}},null,512),[[P.F8,"warning"===e.opt]]),(0,t.wy)((0,t.Wm)(d,{name:"directions_run",class:"q-mr-sm",style:{color:"blue","font-size":"20px"}},null,512),[[P.F8,"running"===e.opt]]),(0,t.Wm)(c,{innerHTML:e.opt},null,8,["innerHTML"])])])),_:2},1024)])),_:2},1040)])),_:1},8,["modelValue"]),Ae,(0,t.Wm)(m,{modelValue:o.clickNode.htc,"onUpdate:modelValue":a[7]||(a[7]=e=>o.clickNode.htc=e),class:"q-mt-xs",style:{border:"1px solid #c2c2c2"},dense:"",push:"",spread:"","no-caps":"",outlined:"",unelevated:"",ripple:!1,"toggle-color":"grey",color:"white","text-color":"black",options:[{label:"true",value:!0},{label:"false",value:!1}]},null,8,["modelValue"]),(0,t._)("div",null,[(0,t.Wm)(f,{label:"保存",color:"primary",class:"q-mb-md",onClick:a[8]||(a[8]=e=>o.saveNode())})])])):"edge"===o.clickType?((0,t.wg)(),(0,t.iD)("div",Pe,[Je,(0,t.Wm)(i,{dense:"",outlined:"",modelValue:o.clickEdge.source.cell,"onUpdate:modelValue":a[9]||(a[9]=e=>o.clickEdge.source.cell=e),class:"q-mt-xs",readonly:""},null,8,["modelValue"]),Ge,(0,t.Wm)(i,{dense:"",outlined:"",modelValue:o.clickEdge.target.cell,"onUpdate:modelValue":a[10]||(a[10]=e=>o.clickEdge.target.cell=e),class:"q-mt-xs",readonly:""},null,8,["modelValue"]),Ye,(0,t.Wm)(w,{outlined:"",separator:"",class:"rounded-borders q-mt-xs",style:{border:"1px solid #e0e0e0"}},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(o.clickEdge.store.data.fileDependencies,(e=>((0,t.wg)(),(0,t.j4)(u,{key:e},{default:(0,t.w5)((()=>[(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Wm)(c,{caption:""},{default:(0,t.w5)((()=>[Ke])),_:1}),(0,t.Wm)(c,{class:"q-pb-xs"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,x.zw)(e.targetAppFile),1)])),_:2},1024),(0,t.Wm)(c,{caption:""},{default:(0,t.w5)((()=>[Xe])),_:1}),(0,t.Wm)(c,{class:"q-pb-xs"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,x.zw)(e.dependencyAppFile),1)])),_:2},1024),(0,t.Wm)(c,{caption:""},{default:(0,t.w5)((()=>[$e])),_:1}),(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,x.zw)(e.dependencyType),1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(r,{top:"",side:""},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{size:"12px",flat:"",round:"",icon:"delete"})])),_:1})])),_:2},1024)))),128)),(0,t.wy)(((0,t.wg)(),(0,t.j4)(u,{clickable:""},{default:(0,t.w5)((()=>[(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Wm)(c,{caption:""},{default:(0,t.w5)((()=>[ea])),_:1})])),_:1})])),_:1})),[[g]])])),_:1})])):((0,t.wg)(),(0,t.iD)("div",aa,[la,(0,t.Wm)(i,{dense:"",outlined:"",modelValue:o.thisFlow.id,"onUpdate:modelValue":a[11]||(a[11]=e=>o.thisFlow.id=e),class:"q-mt-xs",readonly:""},null,8,["modelValue"]),ta,(0,t.Wm)(i,{dense:"",outlined:"",modelValue:o.thisFlow.name,"onUpdate:modelValue":a[12]||(a[12]=e=>o.thisFlow.name=e),class:"q-mt-xs"},null,8,["modelValue"]),oa,(0,t.Wm)(i,{dense:"",outlined:"",modelValue:o.thisFlow.materialName,"onUpdate:modelValue":a[13]||(a[13]=e=>o.thisFlow.materialName=e),class:"q-mt-xs"},null,8,["modelValue"]),(0,t._)("div",null,[(0,t.Wm)(f,{label:"保存",color:"primary",class:"q-mb-md",onClick:a[14]||(a[14]=e=>o.saveFlow())})])]))])}var sa=l(4434);const ia={props:{flow:{type:Object}},setup(e){const a=(0,_.iH)(),l=(0,_.iH)(),o=(0,_.iH)(),n=(0,_.iH)(""),s=(0,_.iH)({name:"",id:"",materialName:""});function i(){const e={name:a.value.name,cpuCores:a.value.cpuCores,appUseCase:a.value.appUseCase,status:a.value.status,htc:a.value.htc};l.value.setData(e),l.value.store.data.position.x=a.value.x,l.value.store.data.position.y=a.value.y,sa.Z.create({type:"positive",message:"保存节点成功！"})}function d(){e.flow.name=s.value.name,e.flow.id=s.value.id,e.flow.materialName=s.value.materialName,sa.Z.create({type:"positive",message:"保存成功！"})}(0,t.Y3)((()=>{s.value.name=e.flow.name,s.value.id=e.flow.id,s.value.materialName=e.flow.materialName}));const c=e=>{n.value="node",l.value=e;const t=l.value.getData(),o={id:l.value.id,cpuCores:t.cpuCores,appUseCase:t.appUseCase,name:t.name,status:t.status,htc:t.htc,x:l.value.store.data.position.x,y:l.value.store.data.position.y};a.value=o},r=e=>{l.value=e,a.value&&(a.value.x=l.value.store.data.position.x,a.value.y=l.value.store.data.position.y)},u=e=>{n.value="edge",o.value=e},p=()=>{n.value="blank",console.log(e.flow),s.value.name=e.flow.name,s.value.id=e.flow.id,s.value.materialName=e.flow.materialName};return{clickType:n,clickNode:a,clickEdge:o,saveNode:i,nodeClickResponse:c,nodeMouseMoveResponse:r,edgeClickResponse:u,blankClickResponse:p,thisFlow:s,saveFlow:d}}};var da=l(9396),ca=l(3414),ra=l(8149),ua=l(2350),pa=l(8761),ma=l(7011),fa=l(6489);const wa=(0,S.Z)(ia,[["render",na]]),ga=wa;O()(ia,"components",{QInput:be.Z,QSelect:da.Z,QIcon:he.Z,QItem:ca.Z,QItemSection:ra.Z,QItemLabel:ua.Z,QBtnToggle:pa.Z,QBtn:E.Z,QList:ma.Z,QSeparator:M.Z}),O()(ia,"directives",{Ripple:fa.Z});const ha={components:{MiniMap:Ie,EditPanel:ga},props:{showRightDrawer:{type:Boolean},flow:{type:Object}},setup(e){const a=(0,t.FN)(),l=(0,_.iH)(),o=(0,t.Fl)((()=>e.showRightDrawer)),n=()=>{a.parent.proxy.shRightDrawer()},s=e=>{l.value.nodeClickResponse(e)},i=e=>{l.value.nodeMouseMoveResponse(e)},d=e=>{l.value.edgeClickResponse(e)},c=()=>{l.value.blankClickResponse()};return{shRightDrawer:n,showRightDrawerCom:o,editPanel:l,nodeClickResponse:s,nodeMouseMoveResponse:i,edgeClickResponse:d,blankClickResponse:c}}},va=(0,S.Z)(ha,[["render",De]]),ba=va;O()(ha,"components",{QDrawer:we.Z,QBar:ge.Z,QIcon:he.Z,QSpace:ve.Z,QBtn:E.Z});l(4874),l(71);const ka={key:0,class:"htc-node-1"},ya={key:1,class:"htc-node-2"},_a={class:"default-node tooltip"},xa={class:"left-side"},Ca={class:"center"},Wa={class:"right-side"},Da={key:0,class:"material-icons status-icons",style:{color:"green"}},qa={key:1,class:"material-icons status-icons",style:{color:"red"}},Ua={key:2,class:"material-icons status-icons",style:{color:"orange"}},Na={key:3,class:"material-icons status-icons running-status",style:{color:"blue"}},Za={key:4,class:"material-icons status-icons",style:{color:"#808080"}};function Va(e,a,l,o,n,s){return(0,t.wg)(),(0,t.iD)("div",null,[o.data.htc?((0,t.wg)(),(0,t.iD)("div",ka)):(0,t.kq)("",!0),o.data.htc?((0,t.wg)(),(0,t.iD)("div",ya)):(0,t.kq)("",!0),(0,t._)("div",_a,[(0,t._)("div",xa,[(0,t._)("span",{class:"material-icons status-icons cursor-pointer",style:{color:"#808080"},onClick:a[0]||(a[0]=(...e)=>o.nodeSetting&&o.nodeSetting(...e))}," settings_outlined ")]),(0,t._)("div",Ca,(0,x.zw)(o.data.name),1),(0,t._)("div",Wa,["success"===o.data.status?((0,t.wg)(),(0,t.iD)("span",Da," check_circle_outline ")):"error"===o.data.status?((0,t.wg)(),(0,t.iD)("span",qa," cancel ")):"warning"===o.data.status?((0,t.wg)(),(0,t.iD)("span",Ua," error_outline ")):"running"===o.data.status?((0,t.wg)(),(0,t.iD)("span",Na," directions_run ")):((0,t.wg)(),(0,t.iD)("span",Za," task "))])])])}var za=l(1525);const Ia={setup(){const e=(0,t.f3)("getNode"),a=e(),l=(0,_.iH)({name:"",status:""}),o=e=>{console.log(e)},n=()=>{za.Z.create({options:{type:"radio",model:"opt1",items:[{label:"使用本地参数文件",value:"opt1",color:"secondary"},{label:"在线配置参数",value:"opt2"}]},persistent:!0,ok:"继续",cancel:"取消"}).onOk((e=>{sa.Z.create({message:"选择了 "+e,color:"primary"})}))};return(0,t.bv)((()=>{l.value=a.getData(),a.on("change:data",(({current:e})=>{l.value=e}))})),{data:l,contextMenu:o,nodeSetting:n}}},Ta=(0,S.Z)(Ia,[["render",Va],["__scopeId","data-v-36478064"]]),Fa=Ta,Qa={class:"text-h6 row"},ja=(0,t.Uk)(" 帮助"),Ha=(0,t._)("div",{class:"text-h6 q-mb-md"},"如何新增",-1),Sa=(0,t._)("p",null,"按住并拖动左侧组件库中的节点到中间画布，松开鼠标即可新增节点。",-1),Ea=(0,t._)("div",{class:"text-h6 q-mb-md"},"如何删除",-1),Ra=(0,t._)("p",null,"鼠标右键点击需要删除的节点，在弹出菜单中点击“删除”。",-1),Ma=(0,t._)("div",{class:"text-h6 q-mb-md"},"如何移动",-1),La=(0,t._)("p",null,"按住并拖动中间画布中的节点到指定位置，松开鼠标即可移动节点。",-1),Oa=(0,t._)("div",{class:"text-h6 q-mb-md"},"如何连线",-1),Ba=(0,t._)("p",null," 鼠标移动到节点上、下边框的连接桩（小圆圈）处，当鼠标指针变为十字形状（+）后，移动鼠标到另一节点的连接桩并松开鼠标，即可连线。 ",-1),Aa=(0,t._)("div",{class:"text-h6 q-mb-md"},"如何配置节点",-1),Pa=(0,t._)("p",null,"鼠标右键点击需要配置的节点，在弹出菜单中点击“配置”。",-1),Ja=(0,t._)("div",{class:"text-h6 q-mb-md"},"如何查看节点",-1),Ga=(0,t._)("p",null,"鼠标右键点击需要查看的节点，在弹出菜单中点击“查看”。",-1);function Ya(e,a,l,o,n,s){const i=(0,t.up)("q-space"),d=(0,t.up)("q-btn"),c=(0,t.up)("q-card-section"),r=(0,t.up)("q-tab"),u=(0,t.up)("q-tabs"),p=(0,t.up)("q-tab-panel"),m=(0,t.up)("q-tab-panels"),f=(0,t.up)("q-splitter"),w=(0,t.up)("q-card"),g=(0,t.up)("q-dialog");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.Wm)(g,{modelValue:o.showHelpDialog,"onUpdate:modelValue":[a[3]||(a[3]=e=>o.showHelpDialog=e),o.close],onEscapeKey:o.close},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{style:{width:"600px","max-width":"80vw"}},{default:(0,t.w5)((()=>[(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t._)("div",Qa,[ja,(0,t.Wm)(i),(0,t.Wm)(d,{dense:"",flat:"",icon:"close",onClick:o.close},null,8,["onClick"])])])),_:1}),(0,t.Wm)(c,{class:"q-pt-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{limits:[20,30],modelValue:o.splitterModel,"onUpdate:modelValue":a[2]||(a[2]=e=>o.splitterModel=e)},{before:(0,t.w5)((()=>[(0,t.Wm)(u,{modelValue:o.tab,"onUpdate:modelValue":a[0]||(a[0]=e=>o.tab=e),vertical:"",class:"text-primary"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{name:"如何新增",label:"如何新增"}),(0,t.Wm)(r,{name:"如何删除",label:"如何删除"}),(0,t.Wm)(r,{name:"如何移动",label:"如何移动"}),(0,t.Wm)(r,{name:"如何连线",label:"如何连线"}),(0,t.Wm)(r,{name:"如何配置节点",label:"如何配置节点"}),(0,t.Wm)(r,{name:"如何查看节点",label:"如何查看节点"})])),_:1},8,["modelValue"])])),after:(0,t.w5)((()=>[(0,t.Wm)(m,{modelValue:o.tab,"onUpdate:modelValue":a[1]||(a[1]=e=>o.tab=e),animated:"",swipeable:"",vertical:"","transition-prev":"jump-up","transition-next":"jump-up"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{name:"如何新增"},{default:(0,t.w5)((()=>[Ha,Sa])),_:1}),(0,t.Wm)(p,{name:"如何删除"},{default:(0,t.w5)((()=>[Ea,Ra])),_:1}),(0,t.Wm)(p,{name:"如何移动"},{default:(0,t.w5)((()=>[Ma,La])),_:1}),(0,t.Wm)(p,{name:"如何连线"},{default:(0,t.w5)((()=>[Oa,Ba])),_:1}),(0,t.Wm)(p,{name:"如何配置节点"},{default:(0,t.w5)((()=>[Aa,Pa])),_:1}),(0,t.Wm)(p,{name:"如何查看节点"},{default:(0,t.w5)((()=>[Ja,Ga])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue","onUpdate:modelValue","onEscapeKey"])])}const Ka={props:{openHelpDialog:{type:Boolean}},setup(e){const a=(0,_.iH)("如何新增"),l=(0,_.iH)(20),o=(0,t.FN)(),n=(0,t.Fl)((()=>e.openHelpDialog)),s=()=>{o.parent.proxy.closeHelp()};return{close:s,tab:a,splitterModel:l,showHelpDialog:n}}};var Xa=l(6778),$a=l(151),el=l(5589),al=l(218),ll=l(7547),tl=l(3269),ol=l(5906),nl=l(6602);const sl=(0,S.Z)(Ka,[["render",Ya]]),il=sl;O()(Ka,"components",{QDialog:Xa.Z,QCard:$a.Z,QCardSection:el.Z,QSpace:ve.Z,QBtn:E.Z,QSplitter:al.Z,QTabs:ll.Z,QTab:tl.Z,QTabPanels:ol.Z,QTabPanel:nl.Z});const dl={class:"text-h6 row"},cl=(0,t.Uk)(" 查看数据");function rl(e,a,l,o,n,s){const i=(0,t.up)("q-space"),d=(0,t.up)("q-btn"),c=(0,t.up)("q-card-section"),r=(0,t.up)("Codemirror"),u=(0,t.up)("q-card"),p=(0,t.up)("q-dialog");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.Wm)(p,{modelValue:o.showCodeDialog,"onUpdate:modelValue":[a[1]||(a[1]=e=>o.showCodeDialog=e),o.close],onEscapeKey:o.close},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{style:{"min-width":"600px","max-width":"80vw"}},{default:(0,t.w5)((()=>[(0,t.Wm)(c,null,{default:(0,t.w5)((()=>[(0,t._)("div",dl,[cl,(0,t.Wm)(i),(0,t.Wm)(d,{dense:"",flat:"",icon:"content_copy",onClick:o.copy},null,8,["onClick"]),(0,t.Wm)(d,{dense:"",flat:"",icon:"close",onClick:o.close},null,8,["onClick"])])])),_:1}),(0,t.Wm)(c,{class:"q-pt-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{value:l.data,"onUpdate:value":a[0]||(a[0]=e=>l.data=e),options:o.cmOptions},null,8,["value","options"])])),_:1})])),_:1})])),_:1},8,["modelValue","onUpdate:modelValue","onEscapeKey"])])}var ul=l(1914),pl=l(9847);l(5201),l(2567),l(4171),l(3131);const ml={components:{Codemirror:pl.ZP},props:{openCodeDialog:{type:Boolean},data:{type:String}},setup(e){const a=(0,t.FN)(),l=(0,t.Fl)((()=>e.openCodeDialog)),o=()=>{(0,ul.Z)(e.data).then((()=>{sa.Z.create({type:"positive",message:"已复制数据到剪贴板！"})})).catch((()=>{sa.Z.create({type:"negative",message:"复制数据失败！"})}))},n=()=>{a.parent.proxy.closeCode()};return{copy:o,close:n,showCodeDialog:l,cmOptions:{tabSize:2,styleActiveLine:!1,matchBrackets:!0,mode:"application/json",lineNumbers:!0,readOnly:!0}}}},fl=(0,S.Z)(ml,[["render",rl]]),wl=fl;O()(ml,"components",{QDialog:Xa.Z,QCard:$a.Z,QCardSection:el.Z,QSpace:ve.Z,QBtn:E.Z});const{Dnd:gl}=b.e9,hl=(0,t.aZ)({components:{ToolBar:A,LeftDrawer:_e,RightDrawer:ba,HelpDialog:il,CodeDialog:wl},setup(){const e=(0,k.Z)();let a;const l=(0,_.iH)({}),o=(0,_.iH)(""),n=(0,_.iH)(""),s=(0,_.iH)(),i=(0,_.iH)(100),d=(0,_.iH)(!0),c=(0,_.iH)(!0),r=(0,_.iH)(!1),u=(0,_.iH)(!1),p=(0,_.iH)({}),m=(0,_.iH)(!1),f={groups:{top:{position:"top",attrs:{circle:{r:4,magnet:!0,stroke:"#c2c8d5",strokeWidth:1.5,fill:"#fff"}}},bottom:{position:"bottom",attrs:{circle:{r:4,magnet:!0,stroke:"#c2c8d5",strokeWidth:1.5,fill:"#fff"}}}},items:[{group:"top"},{group:"bottom"}]};let w={name:"测试工作流20220128-1",externalId:"w-workflow-20220128",materialName:"w",jobs:[{externalId:"fe94ef60-b536-22bb-61fd-6b3a2222be17",cpuCores:"2",appUseCase:"ab08ad37-055b-b368-58aa-037620228cf8",name:"Simulate1脚本",htc:!1},{externalId:"4557647d-19bc-b1d7-5aec-4963dfe83b28",cpuCores:"1",appUseCase:"f30223f0-a215-4402-38ba-067a917b095d",name:"Simulate2脚本",htc:!1},{externalId:"35344a12-c8d7-1e2c-704f-b10a9b56e2c6",cpuCores:"2",appUseCase:"c0121580-1097-418f-14be-170e474fb8d3",name:"Simulate3脚本",htc:!0},{externalId:"8c6f878b-ffa0-e51b-93d2-0e65344d7f56",cpuCores:"2",appUseCase:"f4f1357b-1bfc-6797-5030-b9822d910e73",name:"Simulate4脚本",htc:!1},{externalId:"ba2f49b7-912e-de79-50a3-8e6d4083f681",cpuCores:"1",appUseCase:"1d6913e0-32bd-4563-a073-4900579da937",name:"Simulate5脚本",htc:!1},{externalId:"7a65b4d8-12bd-bd09-170c-cf37cc0a568a",cpuCores:"2",appUseCase:"81abf716-a0f8-f064-cabe-6e4e44442825",name:"Simulate6脚本",htc:!1}],dependencies:[{externalId:"ba832c2b-7ff3-4b24-be99-53ad0f949161",jobExternalId:"4557647d-19bc-b1d7-5aec-4963dfe83b28",jobDependencyExternalId:"fe94ef60-b536-22bb-61fd-6b3a2222be17",fileDependencies:[{targetAppFile:"0a9c2cb6-3dc7-9a00-55f1-33f2e31f5561",dependencyAppFile:"2ae998c2-7a33-65a4-a9b1-07a101ec695c",dependencyType:"appFile"},{targetAppFile:"d499e05c-a1a1-f365-184a-06f64438d81f",dependencyAppFile:"f055da12-e175-3f38-c2df-4a589ddc5db9",dependencyType:"appFile"}]},{externalId:"6201ebaf-5c4a-4211-a9ca-7ecb367c9e25",jobExternalId:"35344a12-c8d7-1e2c-704f-b10a9b56e2c6",jobDependencyExternalId:"fe94ef60-b536-22bb-61fd-6b3a2222be17",fileDependencies:[{targetAppFile:"b098bf40-eb8c-30d8-ef16-8f21ab41b248",dependencyAppFile:"1191f899-eaad-b87c-8936-5cf96d72d1c4",dependencyType:"appFile"}]},{externalId:"a5b8558d-12c8-4ec8-a69f-cbcc7e1dbea7",jobExternalId:"8c6f878b-ffa0-e51b-93d2-0e65344d7f56",jobDependencyExternalId:"4557647d-19bc-b1d7-5aec-4963dfe83b28",fileDependencies:[{targetAppFile:"56c90586-a686-5330-0b16-72a231212171",dependencyAppFile:"56984e29-f833-adae-9253-882e255d2e3b",dependencyType:"appFile"}]},{externalId:"9eda6ea8-d91b-4b1c-9cfb-4a46be11b698",jobExternalId:"ba2f49b7-912e-de79-50a3-8e6d4083f681",jobDependencyExternalId:"4557647d-19bc-b1d7-5aec-4963dfe83b28"},{externalId:"080cf216-4e96-4b31-b664-8666e3f98b41",jobExternalId:"7a65b4d8-12bd-bd09-170c-cf37cc0a568a",jobDependencyExternalId:"35344a12-c8d7-1e2c-704f-b10a9b56e2c6"}]};const g=(0,_.iH)({name:"",id:"",materialName:""});let h={nodes:[],edges:[]};const x=()=>{a.undo()},C=()=>{a.redo()},W=()=>{i.value<=280&&(a.zoom(.2),setTimeout((()=>{i.value=Number((100*a.zoom()).toFixed(0))}),50))},D=()=>{i.value>=70&&(a.zoom(-.2),setTimeout((()=>{i.value=Number((100*a.zoom()).toFixed(0))}),50))},q=()=>{a.centerContent()},U=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var a=16*Math.random()|0,l="x"==e?a:3&a|8;return l.toString(16)})),N=()=>{const l=a.toJSON().cells.find((e=>e.id==o.value)),t=U();a.addNode({id:t,data:{name:"未命名节点",cpuCores:"",appUseCase:"",status:"default",htc:!1},shape:"default-node",ports:Object.assign({},f),x:null===l||void 0===l?void 0:l.position.x,y:(null===l||void 0===l?void 0:l.position.y)+160}),a.addEdge({source:null===l||void 0===l?void 0:l.id,target:t,shape:"default-edge",zIndex:-1}),ee(),e.notify({message:"添加节点成功！进行自动布局？",type:"positive",multiLine:!0,actions:[{label:"否",color:"white",handler:()=>{}},{label:"是",color:"yellow",handler:()=>{L()}}]})},Z=()=>{a.removeNode(o.value),e.notify({message:"删除节点成功！",type:"positive"})},V=()=>{a.removeEdge(o.value),e.notify({message:"删除连线成功！",type:"positive"})},z=()=>{a.clearCells(),e.notify({message:"清空画布成功！",type:"positive"})},I=()=>{e.dialog({options:{type:"radio",model:"opt1",items:[{label:"使用本地参数文件",value:"opt1",color:"secondary"},{label:"在线配置参数",value:"opt2"}]},persistent:!0,ok:"继续",cancel:"取消"}).onOk((a=>{e.notify({message:"选择了 "+a,color:"primary"})}))},T=()=>{Q(),p.value=JSON.stringify(p.value.jobs.find((e=>e.externalId==o.value)),null,2),u.value=!0},F=()=>{Q(),p.value=JSON.stringify(p.value.dependencies.find((e=>e.externalId==o.value)),null,2),u.value=!0},Q=()=>{const e=a.toJSON().cells;let l=[],t=[];for(let a=0,o=e.length;a<o;a++)"default-edge"===e[a].shape?t.push({externalId:e[a].id,jobExternalId:e[a].target.cell,jobDependencyExternalId:e[a].source.cell,fileDependencies:e[a].fileDependencies}):l.push({externalId:e[a].id,cpuCores:e[a].data.cpuCores,appUseCase:e[a].data.appUseCase,name:e[a].data.name,htc:e[a].data.htc});p.value={name:g.value.name,externalId:g.value.id,materialName:g.value.materialName,jobs:l,dependencies:t}},j=()=>{Q(),p.value=JSON.stringify(p.value,null,2),u.value=!0},H=()=>{u.value=!1},S=()=>{e.dialog({title:"提示",message:"确定要下载该流程数据吗？",ok:"确定",cancel:"取消",persistent:!0}).onOk((()=>{Q();const a="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(p.value,null,"\t")),l=document.createElement("a");l.setAttribute("href",a),l.setAttribute("download","data"+y.ZP.formatDate(new Date,"YYYYMMDDHHmm")+".json"),l.click(),l.remove(),e.notify({message:"正在下载中，请稍候...",color:"primary"})}))},E=()=>{r.value=!0},R=()=>{r.value=!1},M=()=>{!0===m.value?a.hideGrid():a.showGrid(),m.value=!m.value},L=()=>{Q(),w=p.value,P(),a.dispose(),G(),Y(),K(),q()},O=()=>{d.value=!d.value,!0===d.value&&!0===c.value?a.resize(window.innerWidth-600,window.innerHeight-52):!0===d.value&&!1===c.value||!1===d.value&&!0===c.value?a.resize(window.innerWidth-300,window.innerHeight-52):a.resize(window.innerWidth,window.innerHeight-52)};function B(){c.value=!c.value,!0===d.value&&!0===c.value?a.resize(window.innerWidth-600,window.innerHeight-52):!0===d.value&&!1===c.value||!1===d.value&&!0===c.value?a.resize(window.innerWidth-300,window.innerHeight-52):a.resize(window.innerWidth,window.innerHeight-52)}const A=(e,t)=>{const o=a.createNode(t.node);l.value.start(o,e)},P=()=>{if(w.name&&(g.value.name=w.name),w.externalId&&(g.value.id=w.externalId),w.materialName&&(g.value.materialName=w.materialName),0!==w.jobs.length){const e=w.jobs;for(let a=0,l=e.length;a<l;a++)h.nodes.push({id:e[a].externalId,data:{name:e[a].name,cpuCores:e[a].cpuCores,appUseCase:e[a].appUseCase,status:"default",htc:e[a].htc},shape:"default-node",ports:Object.assign({},f)})}if(0!==w.dependencies.length){const e=w.dependencies;for(let a=0,l=e.length;a<l;a++)h.edges.push({id:e[a].externalId,source:e[a].jobDependencyExternalId,target:e[a].jobExternalId,fileDependencies:e[a].fileDependencies,shape:"default-edge",zIndex:-1})}},J=()=>{b.kJ.registerNode("default-node",{inherit:"vue-shape",width:200,height:36,component:Fa},!0),b.kJ.registerEdge("default-edge",{inherit:"edge",attrs:{line:{stroke:"#c2c8d5",strokeWidth:1.5,targetMarker:{name:"classic",width:10,height:12}}}},!0)};function G(){const e=new v.Vq({type:"dagre",ranksep:40,nodesep:60,controlPoints:!1});e.layout(h);const l={name:"stroke"};a=new b.kJ({container:document.getElementById("container"),autoResize:!0,height:window.innerHeight-52,background:{color:"#f7f7fa"},grid:{size:10,visible:m.value,type:"dot",args:{color:"#a0a0a0",thickness:1}},snapline:!0,panning:!0,keyboard:!1,mousewheel:{enabled:!0,zoomAtMousePosition:!0,modifiers:"ctrl",minScale:.5,maxScale:3},history:{enabled:!0,ignoreChange:!0},selecting:{enabled:!0,multiple:!1,rubberEdge:!0,showNodeSelectionBox:!0,showEdgeSelectionBox:!0},connecting:{allowPort:!0,allowEdge:!1,allowNode:!1,allowLoop:!1,allowMulti:!1,allowBlank:!1,highlight:!0,snap:!0,router:{name:"er",args:{offset:"center",direction:"V"}},connector:{name:"rounded",args:{radius:45}},anchor:"center",connectionPoint:{name:"bbox"},validateConnection({targetMagnet:e,sourceCell:l,targetCell:t}){const o=a.toJSON().cells.find((e=>{if("edge"===e.shape&&e.target.cell===l.id&&e.source.cell===t.id)return!0}));return!o&&!!e},createEdge(){return a.createEdge({shape:"default-edge",attrs:{line:{strokeDasharray:"5 5"}},zIndex:-1})}},highlighting:{magnetAvailable:l,magnetAdsorbed:{name:"stroke",args:{attrs:{fill:"#fff",stroke:"#31d0c6"}}}}}).fromJSON(h)}const Y=()=>{l.value=new gl({target:a,validateNode(){return!0}})};function K(){a.on("node:contextmenu",(({node:e})=>{n.value="node",o.value=e.id})),a.on("edge:contextmenu",(({edge:e})=>{n.value="edge",o.value=e.id})),a.on("blank:contextmenu",(()=>{n.value="blank",o.value=""})),a.on("cell:mousewheel",(()=>{setTimeout((()=>{i.value=Number((100*a.zoom()).toFixed(0))}),50)})),a.on("blank:mousewheel",(()=>{setTimeout((()=>{i.value=Number((100*a.zoom()).toFixed(0))}),50)})),a.on("node:click",(({node:e})=>{s.value.nodeClickResponse(e),console.log("node",e)})),a.on("edge:click",(({edge:e})=>{s.value.edgeClickResponse(e),console.log("edge",e)})),a.on("blank:click",(({})=>{s.value.blankClickResponse()})),a.on("node:mousemove",(({node:e})=>{s.value.nodeMouseMoveResponse(e)})),a.on("edge:connected",(({edge:e})=>{e.attr({line:{strokeDasharray:""}})})),a.on("node:change:data",(({node:e})=>{const l=e.getData(),t=a.getIncomingEdges(e),o=a.getOutgoingEdges(e);console.log(o),null===t||void 0===t||t.forEach((e=>{"running"===l.status?(e.attr("line/strokeDasharray",5),e.attr("line/style/animation","running-line 30s infinite linear")):(e.attr("line/strokeDasharray",""),e.attr("line/style/animation",""))})),null===o||void 0===o||o.forEach((e=>{!0===l.htc?e.attr("line/strokeWidth",5):e.attr("line/strokeWidth",1.5)}))})),a.on("edge:added",(()=>{ee()}))}const X=(e,l)=>{const t=a.getNodes()[e];let o=t.getData();t.setData({name:o.name,status:l})},$=()=>{X(0,"running"),X(1,"default"),X(2,"default"),X(3,"default"),X(4,"default"),X(5,"default"),setTimeout((()=>{X(0,"success"),X(1,"running"),X(2,"running"),setTimeout((()=>{X(1,"success"),X(3,"running"),X(4,"running"),setTimeout((()=>{X(3,"success"),setTimeout((()=>{X(4,"warning")}),3e3)}),1e3)}),1e3),setTimeout((()=>{X(2,"success"),X(5,"running"),setTimeout((()=>{X(5,"error")}),1e3)}),3e3)}),2e3)},ee=()=>{const e=a.getNodes();for(let a=0,l=e.length;a<l;a++)e[a].getData().htc&&(e[a].setData({htc:!1}),e[a].setData({htc:!0}))};return(0,t.bv)((()=>{P(),J(),G(),Y(),K(),ee(),q()})),{undo:x,redo:C,zoomIn:W,zoomOut:D,centerContent:q,choiceType:n,addNode:N,deleteNode:Z,deleteEdge:V,refresh:z,nodeSetting:I,showNode:T,showEdge:F,showData:j,downloadData:S,shGird:M,layout:L,shLeftDrawer:O,shRightDrawer:B,showLeftDrawer:d,showRightDrawer:c,zoom:i,rightDrawer:s,startDrag:A,runWorkFlow:$,openHelpDialog:r,help:E,closeHelp:R,closeCode:H,openCodeDialog:u,jsonData:p,flow:g}}});var vl=l(4379),bl=l(811),kl=l(677);const yl=(0,S.Z)(hl,[["render",h],["__scopeId","data-v-5ade3102"]]),_l=yl;O()(hl,"components",{QPage:vl.Z,QMenu:bl.Z,QList:ma.Z,QItem:ca.Z,QItemSection:ra.Z,QSeparator:M.Z,QIcon:he.Z}),O()(hl,"directives",{ClosePopup:kl.Z});const xl=(0,t.aZ)({name:"PageIndex",components:{X6Editor:_l},setup(){return{}}}),Cl=(0,S.Z)(xl,[["render",o]]),Wl=Cl}}]);