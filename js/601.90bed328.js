"use strict";(self["webpackChunkquasar_x6_editor"]=self["webpackChunkquasar_x6_editor"]||[]).push([[601],{7601:(e,l,t)=>{t.r(l),t.d(l,{default:()=>lo});var a=t(3673);function o(e,l,t,o,n,i){const s=(0,a.up)("X6Editor");return(0,a.wg)(),(0,a.j4)(s)}var n=t(8880);const i={id:"container"},s=(0,a.Uk)("删除"),d=(0,a.Uk)("查看数据"),c=(0,a.Uk)("添加节点"),r=(0,a.Uk)("删除"),u=(0,a.Uk)("查看数据"),p=(0,a.Uk)("查看数据"),m=(0,a.Uk)("更多"),w=(0,a.Uk)("清空"),f={id:"minimap"};function k(e,l,t,o,k,g){const b=(0,a.up)("Header"),h=(0,a.up)("LeftDrawer"),_=(0,a.up)("RightDrawer"),v=(0,a.up)("q-item-section"),y=(0,a.up)("q-item"),x=(0,a.up)("q-separator"),W=(0,a.up)("q-list"),C=(0,a.up)("q-icon"),q=(0,a.up)("q-menu"),D=(0,a.up)("ToolBar"),U=(0,a.up)("HelpDialog"),Z=(0,a.up)("CodeDialog"),z=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(b,{flow:e.flow,showGrid:e.showGrid,showMinimap:e.showMinimap},null,8,["flow","showGrid","showMinimap"]),(0,a.Wm)(h,{showLeftDrawer:e.showLeftDrawer},null,8,["showLeftDrawer"]),(0,a.Wm)(_,{ref:"rightDrawer",showRightDrawer:e.showRightDrawer,flow:e.flow},null,8,["showRightDrawer","flow"]),(0,a._)("div",i,[(0,a.Wm)(q,{"touch-position":"","context-menu":""},{default:(0,a.w5)((()=>["node"==e.choiceType?((0,a.wg)(),(0,a.j4)(W,{key:0,dense:"",style:{"min-width":"100px"}},{default:(0,a.w5)((()=>[(0,a.wy)(((0,a.wg)(),(0,a.j4)(y,{clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{onClick:e.deleteNode},{default:(0,a.w5)((()=>[s])),_:1},8,["onClick"])])),_:1})),[[z]]),(0,a.Wm)(x),(0,a.wy)(((0,a.wg)(),(0,a.j4)(y,{clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{onClick:e.showNode},{default:(0,a.w5)((()=>[d])),_:1},8,["onClick"])])),_:1})),[[z]]),(0,a.Wm)(x),(0,a.wy)(((0,a.wg)(),(0,a.j4)(y,{clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{onClick:e.addNode},{default:(0,a.w5)((()=>[c])),_:1},8,["onClick"])])),_:1})),[[z]])])),_:1})):(0,a.kq)("",!0),"edge"==e.choiceType?((0,a.wg)(),(0,a.j4)(W,{key:1,dense:"",style:{"min-width":"100px"}},{default:(0,a.w5)((()=>[(0,a.wy)(((0,a.wg)(),(0,a.j4)(y,{clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{onClick:e.deleteEdge},{default:(0,a.w5)((()=>[r])),_:1},8,["onClick"])])),_:1})),[[z]]),(0,a.Wm)(x),(0,a.wy)(((0,a.wg)(),(0,a.j4)(y,{clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{onClick:e.showEdge},{default:(0,a.w5)((()=>[u])),_:1},8,["onClick"])])),_:1})),[[z]])])),_:1})):(0,a.kq)("",!0),"blank"==e.choiceType?((0,a.wg)(),(0,a.j4)(W,{key:2,dense:"",style:{"min-width":"100px"}},{default:(0,a.w5)((()=>[(0,a.wy)(((0,a.wg)(),(0,a.j4)(y,{clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{onClick:e.showData},{default:(0,a.w5)((()=>[p])),_:1},8,["onClick"])])),_:1})),[[z]]),(0,a.Wm)(x),(0,a.Wm)(y,{clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[m])),_:1}),(0,a.Wm)(v,{side:""},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{name:"keyboard_arrow_right"})])),_:1}),(0,a.Wm)(q,{anchor:"top end",self:"top start"},{default:(0,a.w5)((()=>[(0,a.Wm)(W,{dense:"",style:{"min-width":"100px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{onClick:e.refresh},{default:(0,a.w5)((()=>[w])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})):(0,a.kq)("",!0)])),_:1})]),(0,a.wy)((0,a._)("div",f,null,512),[[n.F8,e.showMinimap]]),(0,a.Wm)(D,{zoom:e.zoom,showGrid:e.showGrid,showMinimap:e.showMinimap},null,8,["zoom","showGrid","showMinimap"]),(0,a.Wm)(U,{openHelpDialog:e.openHelpDialog},null,8,["openHelpDialog"]),(0,a.Wm)(Z,{openCodeDialog:e.openCodeDialog,data:e.jsonData},null,8,["openCodeDialog","data"])])}t(5363),t(9676),t(2100);var g=t(9805),b=t(4921),h=t(8825),_=t(1082),v=t(1959);const y={id:"toolbar",class:"row items-center back-blur"},x=(0,a.Uk)(" 显示缩略图 "),W=(0,a.Uk)(" 显示网点 "),C=(0,a.Uk)(" 50% "),q=(0,a.Uk)(" 75% "),D=(0,a.Uk)(" 100% "),U=(0,a.Uk)(" 125% "),Z=(0,a.Uk)(" 150% "),z=(0,a.Uk)(" 200% "),T=(0,a.Uk)(" 300% "),N=(0,a.Uk)(" 重置比例 "),I=(0,a.Uk)(" 适应内容 "),Q=(0,a.Uk)(" 放大 (Ctrl + 滚轮向上) "),j=(0,a.Uk)(" 缩小 (Ctrl + 滚轮向下) "),F=(0,a.Uk)(" 撤销 "),V=(0,a.Uk)(" 重做 "),M=(0,a.Uk)(" 居中 "),S=(0,a.Uk)(" 自动布局 ");function H(e,l,t,o,n,i){const s=(0,a.up)("q-item-section"),d=(0,a.up)("q-icon"),c=(0,a.up)("q-item"),r=(0,a.up)("q-list"),u=(0,a.up)("q-btn-dropdown"),p=(0,a.up)("q-separator"),m=(0,a.up)("q-tooltip"),w=(0,a.up)("q-btn");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",y,[(0,a.Wm)(u,{flat:"",dense:"",icon:"settings",class:"q-ml-xs"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{dense:"",style:{"min-width":"100px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{clickable:"",onClick:o.shMinimap},{default:(0,a.w5)((()=>[(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[x])),_:1}),(0,a.Wm)(s,{side:""},{default:(0,a.w5)((()=>[t.showMinimap?((0,a.wg)(),(0,a.j4)(d,{key:1,left:"",name:"check_box",class:"q-mr-none"})):((0,a.wg)(),(0,a.j4)(d,{key:0,left:"",name:"check_box_outline_blank",class:"q-mr-none"}))])),_:1})])),_:1},8,["onClick"]),(0,a.Wm)(c,{clickable:"",onClick:o.shGrid},{default:(0,a.w5)((()=>[(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[W])),_:1}),(0,a.Wm)(s,{side:""},{default:(0,a.w5)((()=>[t.showGrid?((0,a.wg)(),(0,a.j4)(d,{key:1,left:"",name:"check_box",class:"q-mr-none"})):((0,a.wg)(),(0,a.j4)(d,{key:0,left:"",name:"check_box_outline_blank",class:"q-mr-none"}))])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1}),(0,a.Wm)(p,{vertical:"",inset:""}),(0,a.Wm)(u,{flat:"",dense:"",label:t.zoom+"%",class:"q-ml-xs",style:{width:"68px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{dense:"",style:{"min-width":"100px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{clickable:"",onClick:l[0]||(l[0]=e=>o.zoomTo(.5))},{default:(0,a.w5)((()=>[(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[C])),_:1})])),_:1}),(0,a.Wm)(c,{clickable:"",onClick:l[1]||(l[1]=e=>o.zoomTo(.75))},{default:(0,a.w5)((()=>[(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[q])),_:1})])),_:1}),(0,a.Wm)(c,{clickable:"",onClick:l[2]||(l[2]=e=>o.zoomTo(1))},{default:(0,a.w5)((()=>[(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[D])),_:1})])),_:1}),(0,a.Wm)(c,{clickable:"",onClick:l[3]||(l[3]=e=>o.zoomTo(1.25))},{default:(0,a.w5)((()=>[(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[U])),_:1})])),_:1}),(0,a.Wm)(c,{clickable:"",onClick:l[4]||(l[4]=e=>o.zoomTo(1.5))},{default:(0,a.w5)((()=>[(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[Z])),_:1})])),_:1}),(0,a.Wm)(c,{clickable:"",onClick:l[5]||(l[5]=e=>o.zoomTo(2))},{default:(0,a.w5)((()=>[(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[z])),_:1})])),_:1}),(0,a.Wm)(c,{clickable:"",onClick:l[6]||(l[6]=e=>o.zoomTo(3))},{default:(0,a.w5)((()=>[(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[T])),_:1})])),_:1}),(0,a.Wm)(p),(0,a.Wm)(c,{clickable:"",onClick:l[7]||(l[7]=e=>o.zoomTo(1))},{default:(0,a.w5)((()=>[(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[N])),_:1})])),_:1}),(0,a.Wm)(c,{clickable:"",onClick:o.zoomToFit},{default:(0,a.w5)((()=>[(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[I])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1},8,["label"]),(0,a.Wm)(p,{vertical:"",inset:""}),(0,a.Wm)(w,{flat:"",dense:"",icon:"zoom_in",onClick:o.zoomIn,class:"q-ml-xs"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{offset:[8,8]},{default:(0,a.w5)((()=>[Q])),_:1})])),_:1},8,["onClick"]),(0,a.Wm)(w,{flat:"",dense:"",icon:"zoom_out",onClick:o.zoomOut},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{offset:[8,8]},{default:(0,a.w5)((()=>[j])),_:1})])),_:1},8,["onClick"]),(0,a.Wm)(p,{vertical:"",inset:"",class:"q-ml-xs"}),(0,a.Wm)(w,{flat:"",dense:"",icon:"undo",onClick:o.undo,class:"q-ml-xs"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{offset:[8,8]},{default:(0,a.w5)((()=>[F])),_:1})])),_:1},8,["onClick"]),(0,a.Wm)(w,{flat:"",dense:"",icon:"redo",onClick:o.redo},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{offset:[8,8]},{default:(0,a.w5)((()=>[V])),_:1})])),_:1},8,["onClick"]),(0,a.Wm)(p,{vertical:"",inset:"",class:"q-ml-xs"}),(0,a.Wm)(w,{flat:"",dense:"",icon:"center_focus_weak",onClick:o.centerContent},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{offset:[8,8]},{default:(0,a.w5)((()=>[M])),_:1})])),_:1},8,["onClick"]),(0,a.Wm)(w,{flat:"",dense:"",icon:"timeline",onClick:o.layout},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{offset:[8,8]},{default:(0,a.w5)((()=>[S])),_:1})])),_:1},8,["onClick"])])])}const E={props:{zoom:{type:Number},showGrid:{type:Boolean},showMinimap:{type:Boolean}},setup(){const e=(0,a.FN)(),l=()=>{e.parent.proxy.undo()},t=()=>{e.parent.proxy.redo()},o=()=>{e.parent.proxy.zoomIn()},n=()=>{e.parent.proxy.zoomOut()},i=()=>{e.parent.proxy.centerContent()},s=()=>{e.parent.proxy.shGrid()},d=()=>{e.parent.proxy.shMinimap()},c=()=>{e.parent.proxy.layout()},r=()=>{e.parent.proxy.showData()},u=()=>{e.parent.proxy.downloadData()},p=()=>{e.parent.proxy.runWorkFlow()},m=()=>{e.parent.proxy.help()},w=l=>{e.parent.proxy.zoomTo(l)},f=()=>{e.parent.proxy.zoomToFit()};return{undo:l,redo:t,zoomIn:o,zoomOut:n,centerContent:i,shGrid:s,layout:c,showData:r,downloadData:u,runWorkFlow:p,help:m,shMinimap:d,zoomTo:w,zoomToFit:f}}};var L=t(4260),R=t(2165),B=t(8870),O=t(2226),G=t(7011),A=t(3414),P=t(8149),J=t(4554),Y=t(5869),K=t(677),X=t(7518),$=t.n(X);const ee=(0,L.Z)(E,[["render",H],["__scopeId","data-v-2c8afebb"]]),le=ee;$()(E,"components",{QBtn:R.Z,QTooltip:B.Z,QBtnDropdown:O.Z,QList:G.Z,QItem:A.Z,QItemSection:P.Z,QIcon:J.Z,QSeparator:Y.Z}),$()(E,"directives",{ClosePopup:K.Z});t(71);var te=t(2323);const ae=e=>((0,a.dD)("data-v-5636756a"),e=e(),(0,a.Cn)(),e),oe=ae((()=>(0,a._)("img",{src:"https://cdn.quasar.dev/logo-v2/svg/logo-mono-black.svg"},null,-1))),ne={class:"text-body1 text-bold q-px-sm"},ie={class:"text-body2 row items-center"},se={class:"q-px-sm cursor-pointer non-selectable relative-position flex flex-center toolbar-a"},de=(0,a.Uk)(" 文件 "),ce=(0,a.Uk)(" 查看数据 "),re=(0,a.Uk)(" 导出数据 "),ue=(0,a.Uk)(" 保存！ "),pe=(0,a.Uk)(" 关闭！ "),me={class:"q-px-sm cursor-pointer non-selectable relative-position flex flex-center toolbar-a"},we=(0,a.Uk)(" 编辑 "),fe=(0,a.Uk)(" 撤销 "),ke=(0,a.Uk)(" 重做 "),ge=(0,a.Uk)("更多"),be=(0,a.Uk)("清空"),he={class:"q-px-sm cursor-pointer non-selectable relative-position flex flex-center toolbar-a"},_e=(0,a.Uk)(" 视图 "),ve=(0,a.Uk)(" 显示缩略图 "),ye=(0,a.Uk)(" 显示网点 "),xe=(0,a.Uk)(" 放大 "),We=(0,a.Uk)(" Ctrl+滚轮向上 "),Ce=(0,a.Uk)(" 缩小 "),qe=(0,a.Uk)(" Ctrl+滚轮向下 "),De=(0,a.Uk)(" 居中 "),Ue=(0,a.Uk)(" 自动布局 "),Ze=(0,a.Uk)(" 重置比例 "),ze=(0,a.Uk)(" 适应内容 "),Te=(0,a.Uk)(" 帮助 "),Ne=[Te];function Ie(e,l,t,o,n,i){const s=(0,a.up)("q-avatar"),d=(0,a.up)("q-item-section"),c=(0,a.up)("q-item"),r=(0,a.up)("q-separator"),u=(0,a.up)("q-list"),p=(0,a.up)("q-menu"),m=(0,a.up)("q-icon"),w=(0,a.up)("q-toolbar-title"),f=(0,a.up)("q-btn"),k=(0,a.up)("q-toolbar"),g=(0,a.up)("q-header"),b=(0,a.Q2)("close-popup"),h=(0,a.Q2)("ripple");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(g,{class:"my-header"},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{class:"text-black"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[oe])),_:1}),(0,a.Wm)(w,null,{default:(0,a.w5)((()=>[(0,a._)("div",ne,(0,te.zw)(t.flow.name),1),(0,a._)("div",ie,[(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",se,[de,(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{dense:"",style:{"min-width":"100px"}},{default:(0,a.w5)((()=>[(0,a.wy)(((0,a.wg)(),(0,a.j4)(c,{clickable:"",onClick:o.showData},{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[ce])),_:1})])),_:1},8,["onClick"])),[[b]]),(0,a.wy)(((0,a.wg)(),(0,a.j4)(c,{clickable:"",onClick:o.downloadData},{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[re])),_:1})])),_:1},8,["onClick"])),[[b]]),(0,a.Wm)(r),(0,a.wy)(((0,a.wg)(),(0,a.j4)(c,{clickable:"",onClick:o.showData},{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[ue])),_:1})])),_:1},8,["onClick"])),[[b]]),(0,a.Wm)(r),(0,a.wy)(((0,a.wg)(),(0,a.j4)(c,{clickable:"",onClick:o.showData},{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[pe])),_:1})])),_:1},8,["onClick"])),[[b]])])),_:1})])),_:1})])),[[h]]),(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",me,[we,(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{dense:"",style:{"min-width":"100px"}},{default:(0,a.w5)((()=>[(0,a.wy)(((0,a.wg)(),(0,a.j4)(c,{clickable:"",onClick:o.undo},{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[fe])),_:1})])),_:1},8,["onClick"])),[[b]]),(0,a.wy)(((0,a.wg)(),(0,a.j4)(c,{clickable:"",onClick:o.redo},{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[ke])),_:1})])),_:1},8,["onClick"])),[[b]]),(0,a.Wm)(r),(0,a.Wm)(c,{clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[ge])),_:1}),(0,a.Wm)(d,{side:""},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{name:"keyboard_arrow_right"})])),_:1}),(0,a.Wm)(p,{anchor:"top end",self:"top start"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{dense:"",style:{"min-width":"100px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{onClick:e.refresh},{default:(0,a.w5)((()=>[be])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),[[h]]),(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",he,[_e,(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{dense:"",style:{"min-width":"100px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{clickable:"",onClick:o.shMinimap},{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[ve])),_:1}),(0,a.Wm)(d,{side:""},{default:(0,a.w5)((()=>[t.showMinimap?((0,a.wg)(),(0,a.j4)(m,{key:1,left:"",name:"check_box",class:"q-mr-none"})):((0,a.wg)(),(0,a.j4)(m,{key:0,left:"",name:"check_box_outline_blank",class:"q-mr-none"}))])),_:1})])),_:1},8,["onClick"]),(0,a.Wm)(c,{clickable:"",onClick:o.shGrid},{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[ye])),_:1}),(0,a.Wm)(d,{side:""},{default:(0,a.w5)((()=>[t.showGrid?((0,a.wg)(),(0,a.j4)(m,{key:1,left:"",name:"check_box",class:"q-mr-none"})):((0,a.wg)(),(0,a.j4)(m,{key:0,left:"",name:"check_box_outline_blank",class:"q-mr-none"}))])),_:1})])),_:1},8,["onClick"]),(0,a.Wm)(r),(0,a.Wm)(c,{clickable:"",onClick:o.zoomIn},{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[xe])),_:1}),(0,a.Wm)(d,{side:""},{default:(0,a.w5)((()=>[We])),_:1})])),_:1},8,["onClick"]),(0,a.Wm)(c,{clickable:"",onClick:o.zoomOut},{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[Ce])),_:1}),(0,a.Wm)(d,{side:""},{default:(0,a.w5)((()=>[qe])),_:1})])),_:1},8,["onClick"]),(0,a.Wm)(r),(0,a.Wm)(c,{clickable:"",onClick:o.centerContent},{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[De])),_:1})])),_:1},8,["onClick"]),(0,a.Wm)(c,{clickable:"",onClick:o.layout},{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[Ue])),_:1})])),_:1},8,["onClick"]),(0,a.Wm)(r),(0,a.Wm)(c,{clickable:"",onClick:l[0]||(l[0]=e=>o.zoomTo(1))},{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[Ze])),_:1})])),_:1}),(0,a.Wm)(c,{clickable:"",onClick:o.zoomToFit},{default:(0,a.w5)((()=>[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[ze])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1})])),[[h]]),(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",{class:"q-px-sm cursor-pointer non-selectable relative-position flex flex-center toolbar-a",onClick:l[1]||(l[1]=(...e)=>o.help&&o.help(...e))},Ne)),[[h]])])])),_:1}),(0,a.Wm)(f,{dense:"",push:"",color:"primary",icon:"autorenew",label:"运行",onClick:o.runWorkFlow},null,8,["onClick"])])),_:1})])),_:1})])}const Qe={props:{showGrid:{type:Boolean},showMinimap:{type:Boolean},flow:{type:Object}},setup(){const e=(0,a.FN)(),l=()=>{e.parent.proxy.undo()},t=()=>{e.parent.proxy.redo()},o=()=>{e.parent.proxy.zoomIn()},n=()=>{e.parent.proxy.zoomOut()},i=()=>{e.parent.proxy.centerContent()},s=()=>{e.parent.proxy.shGrid()},d=()=>{e.parent.proxy.shMinimap()},c=()=>{e.parent.proxy.layout()},r=()=>{e.parent.proxy.showData()},u=()=>{e.parent.proxy.downloadData()},p=()=>{e.parent.proxy.runWorkFlow()},m=()=>{e.parent.proxy.help()},w=l=>{e.parent.proxy.zoomTo(l)},f=()=>{e.parent.proxy.zoomToFit()};return{undo:l,redo:t,zoomIn:o,zoomOut:n,centerContent:i,shGrid:s,layout:c,showData:r,downloadData:u,runWorkFlow:p,help:m,shMinimap:d,zoomTo:w,zoomToFit:f}}};var je=t(3812),Fe=t(9570),Ve=t(5096),Me=t(3747),Se=t(811),He=t(6489);const Ee=(0,L.Z)(Qe,[["render",Ie],["__scopeId","data-v-5636756a"]]),Le=Ee;$()(Qe,"components",{QHeader:je.Z,QToolbar:Fe.Z,QAvatar:Ve.Z,QToolbarTitle:Me.Z,QMenu:Se.Z,QList:G.Z,QItem:A.Z,QItemSection:P.Z,QSeparator:Y.Z,QIcon:J.Z,QBtn:R.Z}),$()(Qe,"directives",{Ripple:He.Z,ClosePopup:K.Z});const Re=e=>((0,a.dD)("data-v-b03b141a"),e=e(),(0,a.Cn)(),e),Be=Re((()=>(0,a._)("div",null,[(0,a._)("b",null,"组件库")],-1))),Oe={class:"q-pa-md"},Ge={key:0,class:"row items-center node-label"},Ae=["onMousedown","onTouchstart"],Pe=Re((()=>(0,a._)("div",{class:"left-side"},[(0,a._)("span",{class:"material-icons status-icons",style:{color:"#808080"}}," task ")],-1))),Je={class:"center"},Ye=Re((()=>(0,a._)("div",{class:"right-side"},[(0,a._)("span",{class:"material-icons status-icons"}," tune ")],-1))),Ke={class:"row"},Xe=Re((()=>(0,a._)("div",{class:"col-3"},[(0,a._)("strong",null,"name：")],-1))),$e={class:"col-9"},el={class:"row"},ll=Re((()=>(0,a._)("div",{class:"col-3"},[(0,a._)("strong",null,"appUseCase：")],-1))),tl={class:"col-9"},al={class:"row"},ol=Re((()=>(0,a._)("div",{class:"col-3"},[(0,a._)("strong",null,"cpuCores：")],-1))),nl={class:"col-9"},il={class:"q-mini-drawer-hide absolute",style:{top:"50%",right:"-16px"}},sl={class:"q-mini-drawer-hide absolute",style:{top:"50%",left:"0px"}};function dl(e,l,t,o,i,s){const d=(0,a.up)("q-icon"),c=(0,a.up)("q-space"),r=(0,a.up)("q-btn"),u=(0,a.up)("q-bar"),p=(0,a.up)("q-input"),m=(0,a.up)("q-tooltip"),w=(0,a.up)("q-tree"),f=(0,a.up)("q-drawer");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(f,{id:"leftDrawer",modelValue:o.showLeftDrawerCom,"onUpdate:modelValue":l[1]||(l[1]=e=>o.showLeftDrawerCom=e),"show-if-above":"",width:300,breakpoint:500,bordered:"",side:"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{id:"qBarTitle"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{name:"inventory"}),Be,(0,a.Wm)(c),(0,a.Wm)(r,{dense:"",flat:"",icon:"close",onClick:o.shLeftDrawer},null,8,["onClick"])])),_:1}),(0,a._)("div",Oe,[(0,a.Wm)(p,{outlined:"",dense:"",ref:"filterRef",modelValue:o.filter,"onUpdate:modelValue":l[0]||(l[0]=e=>o.filter=e)},{prepend:(0,a.w5)((()=>[(0,a.Wm)(d,{name:"search"})])),append:(0,a.w5)((()=>[""!==o.filter?((0,a.wg)(),(0,a.j4)(d,{key:0,name:"clear",class:"cursor-pointer",onClick:o.resetFilter},null,8,["onClick"])):(0,a.kq)("",!0)])),_:1},8,["modelValue"]),(0,a.Wm)(w,{nodes:o.nodeList,"node-key":"id",filter:o.filter,"filter-method":o.filterMethod,"no-nodes-label":"没有节点数据！","no-results-label":"没有找到相关节点！","default-expand-all":"",class:"q-pt-sm"},{"default-header":(0,a.w5)((e=>[e.node.icon?((0,a.wg)(),(0,a.iD)("div",Ge,[(0,a.Wm)(d,{name:e.node.icon,class:"q-mr-sm"},null,8,["name"]),(0,a._)("div",null,(0,te.zw)(e.node.data.name),1)])):((0,a.wg)(),(0,a.iD)("div",{key:1,class:"node",onMousedown:l=>o.startDrag(l,e),onTouchstart:(0,n.iM)((l=>o.startDrag(l,e)),["stop"])},[Pe,(0,a._)("div",Je,(0,te.zw)(e.node.data.name),1),Ye,(0,a.Wm)(m,{anchor:"center right",self:"center left",offset:[10,10]},{default:(0,a.w5)((()=>[(0,a._)("div",Ke,[Xe,(0,a._)("div",$e,(0,te.zw)(e.node.data.name),1)]),(0,a._)("div",el,[ll,(0,a._)("div",tl,(0,te.zw)(e.node.data.appUseCase),1)]),(0,a._)("div",al,[ol,(0,a._)("div",nl,(0,te.zw)(e.node.data.cpuCores),1)])])),_:2},1024)],40,Ae))])),_:1},8,["nodes","filter","filter-method"])]),(0,a._)("div",il,[(0,a.Wm)(r,{dense:"",round:"","text-color":"grey-7",unelevated:"",icon:"chevron_left",onClick:o.shLeftDrawer,style:{"z-index":"1"},class:"float-button back-blur"},null,8,["onClick"])])])),_:1},8,["modelValue"]),(0,a._)("div",sl,[(0,a.Wm)(r,{dense:"",round:"","text-color":"grey-7",unelevated:"",icon:"chevron_right",onClick:o.shLeftDrawer,style:{"z-index":"1","margin-top":"25px"},class:"float-button back-blur"},null,8,["onClick"])])])}const cl={props:{showLeftDrawer:{type:Boolean}},setup(e){const l=(0,a.FN)(),t={groups:{top:{position:"top",attrs:{circle:{r:4,magnet:!0,stroke:"#c2c8d5",strokeWidth:1.5,fill:"#fff"}}},bottom:{position:"bottom",attrs:{circle:{r:4,magnet:!0,stroke:"#c2c8d5",strokeWidth:1.5,fill:"#fff"}}}},items:[{group:"top"},{group:"bottom"}]},o=(0,v.iH)([{id:"Simulation",data:{name:"Simulation脚本"},icon:"flag",children:[{id:"Simulation1",shape:"default-node",data:{name:"Simulation1脚本",cpuCores:"4",appUseCase:"ab08ad37-055b-b368-58aa-037620228cf8",status:"default",htc:!1},ports:{...t}},{id:"Simulation2",shape:"default-node",data:{name:"Simulation2脚本",cpuCores:"4",appUseCase:"f30223f0-a215-4402-38ba-067a917b095d",status:"default",htc:!1},ports:{...t}},{id:"Simulation3",shape:"default-node",data:{name:"Simulation3脚本",cpuCores:"4",appUseCase:"c0121580-1097-418f-14be-170e474fb8d3",status:"default",htc:!1},ports:{...t}},{id:"Simulation4",shape:"default-node",data:{name:"Simulation4脚本",cpuCores:"4",appUseCase:"f4f1357b-1bfc-6797-5030-b9822d910e73",status:"default",htc:!1},ports:{...t}}]},{id:"Tool",data:{name:"Tool工具"},icon:"construction",children:[{id:"Tool1",shape:"default-node",data:{name:"Tool1工具",cpuCores:"4",appUseCase:"79737114-e574-8956-bd45-8cf3b9fc8c88",status:"default",htc:!1},ports:{...t}},{id:"Tool2",shape:"default-node",data:{name:"Tool2工具",cpuCores:"4",appUseCase:"75ca097e-b868-4250-885b-138a824f4982",status:"default",htc:!1},ports:{...t}},{id:"Tool3",shape:"default-node",data:{name:"Tool3工具",cpuCores:"4",appUseCase:"cec670a0-f6af-916f-7a52-ec9cbd102a9a",status:"default",htc:!1},ports:{...t}}]}]),n=(0,v.iH)(""),i=(0,v.iH)(null),s=(e,t)=>{l.parent.proxy.startDrag(e,t)},d=(0,a.Fl)((()=>e.showLeftDrawer)),c=()=>{l.parent.proxy.shLeftDrawer()},r=(e,l)=>-1!==e.data.name.indexOf(l);return{shLeftDrawer:c,showLeftDrawerCom:d,nodeList:o,filter:n,filterRef:i,resetFilter(){n.value="",i.value.focus()},startDrag:s,filterMethod:r}}};var rl=t(2901),ul=t(846),pl=t(2025),ml=t(4842),wl=t(5551);const fl=(0,L.Z)(cl,[["render",dl],["__scopeId","data-v-b03b141a"]]),kl=fl;$()(cl,"components",{QDrawer:rl.Z,QBar:ul.Z,QIcon:J.Z,QSpace:pl.Z,QBtn:R.Z,QInput:ml.Z,QTree:wl.Z,QTooltip:B.Z});const gl=e=>((0,a.dD)("data-v-4464dabb"),e=e(),(0,a.Cn)(),e),bl=gl((()=>(0,a._)("div",null,[(0,a._)("b",null,"编辑")],-1))),hl={class:"q-mini-drawer-hide absolute",style:{top:"50%",left:"-16px"}},_l={class:"q-mini-drawer-hide absolute",style:{top:"50%",right:"0px"}};function vl(e,l,t,o,n,i){const s=(0,a.up)("q-icon"),d=(0,a.up)("q-space"),c=(0,a.up)("q-btn"),r=(0,a.up)("q-bar"),u=(0,a.up)("EditPanel"),p=(0,a.up)("q-drawer");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(p,{id:"rightDrawer",modelValue:o.showRightDrawerCom,"onUpdate:modelValue":l[0]||(l[0]=e=>o.showRightDrawerCom=e),"show-if-above":"",width:300,breakpoint:500,bordered:"",side:"right"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{id:"qBarTitle"},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{name:"edit"}),bl,(0,a.Wm)(d),(0,a.Wm)(c,{dense:"",flat:"",icon:"close",onClick:o.shRightDrawer},null,8,["onClick"])])),_:1}),(0,a.Wm)(u,{id:"edit",ref:"editPanel",flow:t.flow},null,8,["flow"]),(0,a._)("div",hl,[(0,a.Wm)(c,{dense:"",round:"","text-color":"grey-7",unelevated:"",icon:"chevron_right",onClick:o.shRightDrawer,style:{"z-index":"1"},class:"float-button back-blur"},null,8,["onClick"])])])),_:1},8,["modelValue"]),(0,a._)("div",_l,[(0,a.Wm)(c,{dense:"",round:"","text-color":"grey-7",unelevated:"",icon:"chevron_left",onClick:o.shRightDrawer,style:{"z-index":"1","margin-top":"25px"},class:"float-button back-blur"},null,8,["onClick"])])])}const yl=e=>((0,a.dD)("data-v-571dd375"),e=e(),(0,a.Cn)(),e),xl=yl((()=>(0,a._)("div",{id:"titleBar"},"导航器",-1))),Wl=yl((()=>(0,a._)("div",{id:"minimapContainer"},null,-1))),Cl=[xl,Wl];function ql(e,l,t,o,n,i){return(0,a.wg)(),(0,a.iD)("div",null,Cl)}const Dl={},Ul=(0,L.Z)(Dl,[["render",ql],["__scopeId","data-v-571dd375"]]),Zl=Ul,zl=e=>((0,a.dD)("data-v-71faa120"),e=e(),(0,a.Cn)(),e),Tl={key:0,class:"q-gutter-md q-pl-md q-pr-md q-pt-md"},Nl=zl((()=>(0,a._)("div",{class:"inputTitle row"},[(0,a._)("div",{class:"col-6"},"x"),(0,a._)("div",{class:"col-6 q-pl-sm"},"y")],-1))),Il={class:"row q-mt-xs"},Ql={class:"col-6 q-pr-xs"},jl={class:"col-6 q-pl-xs"},Fl=zl((()=>(0,a._)("div",{class:"inputTitle q-mt-sm"},"externalId",-1))),Vl=zl((()=>(0,a._)("div",{class:"inputTitle q-mt-sm"},"cpuCores",-1))),Ml=zl((()=>(0,a._)("div",{class:"inputTitle q-mt-sm"},"appUseCase",-1))),Sl=zl((()=>(0,a._)("div",{class:"inputTitle q-mt-sm"},"name",-1))),Hl=zl((()=>(0,a._)("div",{class:"inputTitle q-mt-sm"},"status",-1))),El={class:"select-text"},Ll={class:"row",style:{"margin-left":"-4px"}},Rl=zl((()=>(0,a._)("div",{class:"inputTitle q-mt-sm"},"htc",-1))),Bl={key:1,class:"q-gutter-md q-pl-md q-pr-md q-pt-md"},Ol=zl((()=>(0,a._)("div",{class:"inputTitle q-mt-sm"},"source",-1))),Gl=zl((()=>(0,a._)("div",{class:"inputTitle q-mt-sm"},"target",-1))),Al=zl((()=>(0,a._)("div",{class:"inputTitle q-mt-sm"},"fileDependencies",-1))),Pl=(0,a.Uk)("targetAppFile"),Jl=(0,a.Uk)("dependencyAppFile"),Yl=(0,a.Uk)("dependencyType"),Kl=(0,a.Uk)("+ 添加文件"),Xl={key:2,class:"q-gutter-md q-pl-md q-pr-md q-pt-md"},$l=zl((()=>(0,a._)("div",{class:"inputTitle q-mt-sm"},"id",-1))),et=zl((()=>(0,a._)("div",{class:"inputTitle q-mt-sm"},"name",-1))),lt=zl((()=>(0,a._)("div",{class:"inputTitle q-mt-sm"},"materialName",-1)));function tt(e,l,t,o,i,s){const d=(0,a.up)("q-input"),c=(0,a.up)("q-icon"),r=(0,a.up)("q-item-label"),u=(0,a.up)("q-item-section"),p=(0,a.up)("q-item"),m=(0,a.up)("q-select"),w=(0,a.up)("q-btn-toggle"),f=(0,a.up)("q-btn"),k=(0,a.up)("q-list"),g=(0,a.Q2)("ripple");return(0,a.wg)(),(0,a.iD)("div",null,["node"===o.clickType?((0,a.wg)(),(0,a.iD)("div",Tl,[Nl,(0,a._)("div",Il,[(0,a._)("div",Ql,[(0,a.Wm)(d,{dense:"",outlined:"",modelValue:o.clickNode.x,"onUpdate:modelValue":l[0]||(l[0]=e=>o.clickNode.x=e),readonly:""},null,8,["modelValue"])]),(0,a._)("div",jl,[(0,a.Wm)(d,{dense:"",outlined:"",modelValue:o.clickNode.y,"onUpdate:modelValue":l[1]||(l[1]=e=>o.clickNode.y=e),readonly:""},null,8,["modelValue"])])]),Fl,(0,a.Wm)(d,{dense:"",outlined:"",modelValue:o.clickNode.id,"onUpdate:modelValue":l[2]||(l[2]=e=>o.clickNode.id=e),class:"q-mt-xs",readonly:""},null,8,["modelValue"]),Vl,(0,a.Wm)(d,{dense:"",outlined:"",modelValue:o.clickNode.cpuCores,"onUpdate:modelValue":l[3]||(l[3]=e=>o.clickNode.cpuCores=e),class:"q-mt-xs"},null,8,["modelValue"]),Ml,(0,a.Wm)(d,{dense:"",outlined:"",modelValue:o.clickNode.appUseCase,"onUpdate:modelValue":l[4]||(l[4]=e=>o.clickNode.appUseCase=e),class:"q-mt-xs"},null,8,["modelValue"]),Sl,(0,a.Wm)(d,{dense:"",outlined:"",modelValue:o.clickNode.name,"onUpdate:modelValue":l[5]||(l[5]=e=>o.clickNode.name=e),class:"q-mt-xs"},null,8,["modelValue"]),Hl,(0,a.Wm)(m,{dense:"",outlined:"",modelValue:o.clickNode.status,"onUpdate:modelValue":l[6]||(l[6]=e=>o.clickNode.status=e),options:["default","success","error","warning","running"],class:"q-mt-xs"},{prepend:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(c,{name:"task",class:"text-default",style:{"font-size":"20px"}},null,512),[[n.F8,"default"===o.clickNode.status]]),(0,a.wy)((0,a.Wm)(c,{name:"check_circle_outline",class:"text-positive",style:{"font-size":"20px"}},null,512),[[n.F8,"success"===o.clickNode.status]]),(0,a.wy)((0,a.Wm)(c,{name:"cancel",class:"text-red",style:{"font-size":"20px"}},null,512),[[n.F8,"error"===o.clickNode.status]]),(0,a.wy)((0,a.Wm)(c,{name:"error_outline",class:"text-warning",style:{"font-size":"20px"}},null,512),[[n.F8,"warning"===o.clickNode.status]]),(0,a.wy)((0,a.Wm)(c,{name:"directions_run",class:"text-primary",style:{"font-size":"20px"}},null,512),[[n.F8,"running"===o.clickNode.status]])])),selected:(0,a.w5)((()=>[(0,a._)("div",El,(0,te.zw)(o.clickNode.status),1)])),option:(0,a.w5)((e=>[(0,a.Wm)(p,(0,a.dG)(e.itemProps,(0,a.mx)(e.itemEvents)),{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a._)("span",Ll,[(0,a.wy)((0,a.Wm)(c,{name:"task",class:"q-mr-sm text-default",style:{"font-size":"20px"}},null,512),[[n.F8,"default"===e.opt]]),(0,a.wy)((0,a.Wm)(c,{name:"check_circle_outline",class:"q-mr-sm text-positive",style:{"font-size":"20px"}},null,512),[[n.F8,"success"===e.opt]]),(0,a.wy)((0,a.Wm)(c,{name:"cancel",class:"q-mr-sm text-red",style:{"font-size":"20px"}},null,512),[[n.F8,"error"===e.opt]]),(0,a.wy)((0,a.Wm)(c,{name:"error_outline",class:"q-mr-sm text-warning",style:{"font-size":"20px"}},null,512),[[n.F8,"warning"===e.opt]]),(0,a.wy)((0,a.Wm)(c,{name:"directions_run",class:"q-mr-sm text-primary",style:{"font-size":"20px"}},null,512),[[n.F8,"running"===e.opt]]),(0,a.Wm)(r,{innerHTML:e.opt},null,8,["innerHTML"])])])),_:2},1024)])),_:2},1040)])),_:1},8,["modelValue"]),Rl,(0,a.Wm)(w,{modelValue:o.clickNode.htc,"onUpdate:modelValue":l[7]||(l[7]=e=>o.clickNode.htc=e),class:"q-mt-xs",style:{border:"1px solid #c2c2c2"},dense:"",push:"",spread:"","no-caps":"",outlined:"",unelevated:"",ripple:!1,"toggle-color":"grey",color:"white","text-color":"black",options:[{label:"true",value:!0},{label:"false",value:!1}]},null,8,["modelValue"]),(0,a._)("div",null,[(0,a.Wm)(f,{label:"保存",color:"primary",class:"q-mb-md",onClick:l[8]||(l[8]=e=>o.saveNode())})])])):"edge"===o.clickType?((0,a.wg)(),(0,a.iD)("div",Bl,[Ol,(0,a.Wm)(d,{dense:"",outlined:"",modelValue:o.clickEdge.source.cell,"onUpdate:modelValue":l[9]||(l[9]=e=>o.clickEdge.source.cell=e),class:"q-mt-xs",readonly:""},null,8,["modelValue"]),Gl,(0,a.Wm)(d,{dense:"",outlined:"",modelValue:o.clickEdge.target.cell,"onUpdate:modelValue":l[10]||(l[10]=e=>o.clickEdge.target.cell=e),class:"q-mt-xs",readonly:""},null,8,["modelValue"]),Al,(0,a.Wm)(k,{outlined:"",separator:"",class:"rounded-borders q-mt-xs",style:{border:"1px solid #e0e0e0"}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.clickEdge.store.data.fileDependencies,(e=>((0,a.wg)(),(0,a.j4)(p,{key:e},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,{caption:""},{default:(0,a.w5)((()=>[Pl])),_:1}),(0,a.Wm)(r,{class:"q-pb-xs"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,te.zw)(e.targetAppFile),1)])),_:2},1024),(0,a.Wm)(r,{caption:""},{default:(0,a.w5)((()=>[Jl])),_:1}),(0,a.Wm)(r,{class:"q-pb-xs"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,te.zw)(e.dependencyAppFile),1)])),_:2},1024),(0,a.Wm)(r,{caption:""},{default:(0,a.w5)((()=>[Yl])),_:1}),(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,te.zw)(e.dependencyType),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(u,{top:"",side:""},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{size:"12px",flat:"",round:"",icon:"delete"})])),_:1})])),_:2},1024)))),128)),(0,a.wy)(((0,a.wg)(),(0,a.j4)(p,{clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(r,{caption:""},{default:(0,a.w5)((()=>[Kl])),_:1})])),_:1})])),_:1})),[[g]])])),_:1})])):((0,a.wg)(),(0,a.iD)("div",Xl,[$l,(0,a.Wm)(d,{dense:"",outlined:"",modelValue:o.thisFlow.id,"onUpdate:modelValue":l[11]||(l[11]=e=>o.thisFlow.id=e),class:"q-mt-xs",readonly:""},null,8,["modelValue"]),et,(0,a.Wm)(d,{dense:"",outlined:"",modelValue:o.thisFlow.name,"onUpdate:modelValue":l[12]||(l[12]=e=>o.thisFlow.name=e),class:"q-mt-xs"},null,8,["modelValue"]),lt,(0,a.Wm)(d,{dense:"",outlined:"",modelValue:o.thisFlow.materialName,"onUpdate:modelValue":l[13]||(l[13]=e=>o.thisFlow.materialName=e),class:"q-mt-xs"},null,8,["modelValue"]),(0,a._)("div",null,[(0,a.Wm)(f,{label:"保存",color:"primary",class:"q-mb-md",onClick:l[14]||(l[14]=e=>o.saveFlow())})])]))])}var at=t(4434);const ot={props:{flow:{type:Object}},setup(e){const l=(0,v.iH)(),t=(0,v.iH)(),o=(0,v.iH)(),n=(0,v.iH)(""),i=(0,v.iH)({name:"",id:"",materialName:""});function s(){const e={name:l.value.name,cpuCores:l.value.cpuCores,appUseCase:l.value.appUseCase,status:l.value.status,htc:l.value.htc};t.value.setData(e),t.value.store.data.position.x=l.value.x,t.value.store.data.position.y=l.value.y,at.Z.create({type:"positive",message:"保存节点成功！"})}function d(){e.flow.name=i.value.name,e.flow.id=i.value.id,e.flow.materialName=i.value.materialName,at.Z.create({type:"positive",message:"保存成功！"})}(0,a.Y3)((()=>{i.value.name=e.flow.name,i.value.id=e.flow.id,i.value.materialName=e.flow.materialName}));const c=e=>{n.value="node",t.value=e;const a=t.value.getData(),o={id:t.value.id,cpuCores:a.cpuCores,appUseCase:a.appUseCase,name:a.name,status:a.status,htc:a.htc,x:t.value.store.data.position.x,y:t.value.store.data.position.y};l.value=o},r=e=>{t.value=e,l.value&&(l.value.x=t.value.store.data.position.x,l.value.y=t.value.store.data.position.y)},u=e=>{n.value="edge",o.value=e},p=()=>{n.value="blank",console.log(e.flow),i.value.name=e.flow.name,i.value.id=e.flow.id,i.value.materialName=e.flow.materialName};return{clickType:n,clickNode:l,clickEdge:o,saveNode:s,nodeClickResponse:c,nodeMouseMoveResponse:r,edgeClickResponse:u,blankClickResponse:p,thisFlow:i,saveFlow:d}}};var nt=t(9396),it=t(2350),st=t(201);const dt=(0,L.Z)(ot,[["render",tt],["__scopeId","data-v-71faa120"]]),ct=dt;$()(ot,"components",{QInput:ml.Z,QSelect:nt.Z,QIcon:J.Z,QItem:A.Z,QItemSection:P.Z,QItemLabel:it.Z,QBtnToggle:st.Z,QBtn:R.Z,QList:G.Z,QSeparator:Y.Z}),$()(ot,"directives",{Ripple:He.Z});const rt={components:{MiniMap:Zl,EditPanel:ct},props:{showRightDrawer:{type:Boolean},flow:{type:Object}},setup(e){const l=(0,a.FN)(),t=(0,v.iH)(),o=(0,a.Fl)((()=>e.showRightDrawer)),n=()=>{l.parent.proxy.shRightDrawer()},i=e=>{t.value.nodeClickResponse(e)},s=e=>{t.value.nodeMouseMoveResponse(e)},d=e=>{t.value.edgeClickResponse(e)},c=()=>{t.value.blankClickResponse()};return{shRightDrawer:n,showRightDrawerCom:o,editPanel:t,nodeClickResponse:i,nodeMouseMoveResponse:s,edgeClickResponse:d,blankClickResponse:c}}},ut=(0,L.Z)(rt,[["render",vl],["__scopeId","data-v-4464dabb"]]),pt=ut;$()(rt,"components",{QDrawer:rl.Z,QBar:ul.Z,QIcon:J.Z,QSpace:pl.Z,QBtn:R.Z});t(4874);const mt=e=>((0,a.dD)("data-v-2c04f7ec"),e=e(),(0,a.Cn)(),e),wt={key:0,class:"default-node htc-node-1"},ft=mt((()=>(0,a._)("div",{class:"left-side"},null,-1))),kt=[ft],gt={key:1,class:"default-node htc-node-2"},bt=mt((()=>(0,a._)("div",{class:"left-side"},null,-1))),ht=[bt],_t={class:"default-node"},vt={class:"left-side"},yt={key:0,class:"material-icons status-icons tooltip text-positive"},xt=(0,a.Uk)(" check_circle_outline "),Wt=mt((()=>(0,a._)("span",{class:"tooltiptext bg-positive",style:{left:"18%"}},"成功",-1))),Ct=[xt,Wt],qt={key:1,class:"material-icons status-icons tooltip text-red"},Dt=(0,a.Uk)(" cancel "),Ut=mt((()=>(0,a._)("span",{class:"tooltiptext bg-red",style:{left:"18%"}},"错误",-1))),Zt=[Dt,Ut],zt={key:2,class:"material-icons status-icons tooltip text-warning"},Tt=(0,a.Uk)(" error_outline "),Nt=mt((()=>(0,a._)("span",{class:"tooltiptext bg-warning",style:{left:"18%"}},"警告",-1))),It=[Tt,Nt],Qt={key:3,class:"material-icons status-icons running-status tooltip text-primary"},jt=(0,a.Uk)(" directions_run "),Ft=mt((()=>(0,a._)("span",{class:"tooltiptext bg-primary",style:{left:"18%"}},"运行",-1))),Vt=[jt,Ft],Mt={key:4,class:"material-icons status-icons tooltip text-default"},St=(0,a.Uk)(" task "),Ht=mt((()=>(0,a._)("span",{class:"tooltiptext",style:{left:"18%"}},"默认",-1))),Et=[St,Ht],Lt={class:"center"},Rt={class:"right-side"},Bt=(0,a.Uk)(" tune "),Ot=mt((()=>(0,a._)("span",{class:"tooltiptext"},"配置",-1))),Gt=[Bt,Ot];function At(e,l,t,o,n,i){return(0,a.wg)(),(0,a.iD)("div",null,[o.data.htc?((0,a.wg)(),(0,a.iD)("div",wt,kt)):(0,a.kq)("",!0),o.data.htc?((0,a.wg)(),(0,a.iD)("div",gt,ht)):(0,a.kq)("",!0),(0,a._)("div",_t,[(0,a._)("div",vt,["success"===o.data.status?((0,a.wg)(),(0,a.iD)("span",yt,Ct)):"error"===o.data.status?((0,a.wg)(),(0,a.iD)("span",qt,Zt)):"warning"===o.data.status?((0,a.wg)(),(0,a.iD)("span",zt,It)):"running"===o.data.status?((0,a.wg)(),(0,a.iD)("span",Qt,Vt)):((0,a.wg)(),(0,a.iD)("span",Mt,Et))]),(0,a._)("div",Lt,(0,te.zw)(o.data.name),1),(0,a._)("div",Rt,[(0,a._)("span",{class:"material-icons status-icons cursor-pointer tooltip",onClick:l[0]||(l[0]=(...e)=>o.nodeSetting&&o.nodeSetting(...e))},Gt)])])])}var Pt=t(1525);const Jt={setup(){const e=(0,a.f3)("getNode"),l=e(),t=(0,v.iH)({name:"",status:""}),o=e=>{console.log(e)},n=()=>{Pt.Z.create({title:"配置",options:{type:"radio",model:"opt1",items:[{label:"使用本地参数文件",value:"opt1",color:"secondary"},{label:"在线配置参数",value:"opt2"}]},ok:"继续",cancel:"取消"}).onOk((e=>{at.Z.create({message:"选择了 "+e,color:"primary"})}))};return(0,a.bv)((()=>{t.value=l.getData(),l.on("change:data",(({current:e})=>{t.value=e}))})),{data:t,contextMenu:o,nodeSetting:n}}},Yt=(0,L.Z)(Jt,[["render",At],["__scopeId","data-v-2c04f7ec"]]),Kt=Yt,Xt=e=>((0,a.dD)("data-v-c551dc10"),e=e(),(0,a.Cn)(),e),$t={class:"text-h6 row"},ea=(0,a.Uk)(" 帮助"),la=Xt((()=>(0,a._)("div",{class:"text-h6 q-mb-md"},"如何新增",-1))),ta=Xt((()=>(0,a._)("p",null,"按住并拖动左侧组件库中的节点到中间画布，松开鼠标即可新增节点。",-1))),aa=Xt((()=>(0,a._)("div",{class:"text-h6 q-mb-md"},"如何删除",-1))),oa=Xt((()=>(0,a._)("p",null,"鼠标右键点击需要删除的节点，在弹出菜单中点击“删除”。",-1))),na=Xt((()=>(0,a._)("div",{class:"text-h6 q-mb-md"},"如何移动",-1))),ia=Xt((()=>(0,a._)("p",null,"按住并拖动中间画布中的节点到指定位置，松开鼠标即可移动节点。",-1))),sa=Xt((()=>(0,a._)("div",{class:"text-h6 q-mb-md"},"如何连线",-1))),da=Xt((()=>(0,a._)("p",null," 鼠标移动到节点上、下边框的连接桩（小圆圈）处，当鼠标指针变为十字形状（+）后，移动鼠标到另一节点的连接桩并松开鼠标，即可连线。 ",-1))),ca=Xt((()=>(0,a._)("div",{class:"text-h6 q-mb-md"},"如何配置节点",-1))),ra=Xt((()=>(0,a._)("p",null,"鼠标右键点击需要配置的节点，在弹出菜单中点击“配置”。",-1))),ua=Xt((()=>(0,a._)("div",{class:"text-h6 q-mb-md"},"如何查看节点",-1))),pa=Xt((()=>(0,a._)("p",null,"鼠标右键点击需要查看的节点，在弹出菜单中点击“查看”。",-1)));function ma(e,l,t,o,n,i){const s=(0,a.up)("q-space"),d=(0,a.up)("q-btn"),c=(0,a.up)("q-card-section"),r=(0,a.up)("q-tab"),u=(0,a.up)("q-tabs"),p=(0,a.up)("q-tab-panel"),m=(0,a.up)("q-tab-panels"),w=(0,a.up)("q-splitter"),f=(0,a.up)("q-card"),k=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(k,{modelValue:o.showHelpDialog,"onUpdate:modelValue":[l[3]||(l[3]=e=>o.showHelpDialog=e),o.close],onEscapeKey:o.close},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{style:{width:"600px","max-width":"80vw"}},{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a._)("div",$t,[ea,(0,a.Wm)(s),(0,a.Wm)(d,{dense:"",flat:"",icon:"close",onClick:o.close},null,8,["onClick"])])])),_:1}),(0,a.Wm)(c,{class:"q-pt-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{limits:[20,30],modelValue:o.splitterModel,"onUpdate:modelValue":l[2]||(l[2]=e=>o.splitterModel=e)},{before:(0,a.w5)((()=>[(0,a.Wm)(u,{modelValue:o.tab,"onUpdate:modelValue":l[0]||(l[0]=e=>o.tab=e),vertical:"",class:"text-primary"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{name:"如何新增",label:"如何新增"}),(0,a.Wm)(r,{name:"如何删除",label:"如何删除"}),(0,a.Wm)(r,{name:"如何移动",label:"如何移动"}),(0,a.Wm)(r,{name:"如何连线",label:"如何连线"}),(0,a.Wm)(r,{name:"如何配置节点",label:"如何配置节点"}),(0,a.Wm)(r,{name:"如何查看节点",label:"如何查看节点"})])),_:1},8,["modelValue"])])),after:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:o.tab,"onUpdate:modelValue":l[1]||(l[1]=e=>o.tab=e),animated:"",swipeable:"",vertical:"","transition-prev":"jump-up","transition-next":"jump-up"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{name:"如何新增"},{default:(0,a.w5)((()=>[la,ta])),_:1}),(0,a.Wm)(p,{name:"如何删除"},{default:(0,a.w5)((()=>[aa,oa])),_:1}),(0,a.Wm)(p,{name:"如何移动"},{default:(0,a.w5)((()=>[na,ia])),_:1}),(0,a.Wm)(p,{name:"如何连线"},{default:(0,a.w5)((()=>[sa,da])),_:1}),(0,a.Wm)(p,{name:"如何配置节点"},{default:(0,a.w5)((()=>[ca,ra])),_:1}),(0,a.Wm)(p,{name:"如何查看节点"},{default:(0,a.w5)((()=>[ua,pa])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue","onUpdate:modelValue","onEscapeKey"])])}const wa={props:{openHelpDialog:{type:Boolean}},setup(e){const l=(0,v.iH)("如何新增"),t=(0,v.iH)(20),o=(0,a.FN)(),n=(0,a.Fl)((()=>e.openHelpDialog)),i=()=>{o.parent.proxy.closeHelp()};return{close:i,tab:l,splitterModel:t,showHelpDialog:n}}};var fa=t(6778),ka=t(151),ga=t(5589),ba=t(218),ha=t(7547),_a=t(3269),va=t(5906),ya=t(6602);const xa=(0,L.Z)(wa,[["render",ma],["__scopeId","data-v-c551dc10"]]),Wa=xa;$()(wa,"components",{QDialog:fa.Z,QCard:ka.Z,QCardSection:ga.Z,QSpace:pl.Z,QBtn:R.Z,QSplitter:ba.Z,QTabs:ha.Z,QTab:_a.Z,QTabPanels:va.Z,QTabPanel:ya.Z});const Ca={class:"text-h6 row"},qa=(0,a.Uk)(" 查看数据");function Da(e,l,t,o,n,i){const s=(0,a.up)("q-space"),d=(0,a.up)("q-btn"),c=(0,a.up)("q-card-section"),r=(0,a.up)("Codemirror"),u=(0,a.up)("q-card"),p=(0,a.up)("q-dialog");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(p,{modelValue:o.showCodeDialog,"onUpdate:modelValue":[l[1]||(l[1]=e=>o.showCodeDialog=e),o.close],onEscapeKey:o.close},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{style:{"min-width":"600px","max-width":"80vw"}},{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a._)("div",Ca,[qa,(0,a.Wm)(s),(0,a.Wm)(d,{dense:"",flat:"",icon:"content_copy",onClick:o.copy},null,8,["onClick"]),(0,a.Wm)(d,{dense:"",flat:"",icon:"close",onClick:o.close},null,8,["onClick"])])])),_:1}),(0,a.Wm)(c,{class:"q-pt-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{value:t.data,"onUpdate:value":l[0]||(l[0]=e=>t.data=e),options:o.cmOptions},null,8,["value","options"])])),_:1})])),_:1})])),_:1},8,["modelValue","onUpdate:modelValue","onEscapeKey"])])}var Ua=t(1914),Za=t(9847);t(3131);const za={components:{Codemirror:Za.ZP},props:{openCodeDialog:{type:Boolean},data:{type:String}},setup(e){const l=(0,a.FN)(),t=(0,a.Fl)((()=>e.openCodeDialog)),o=()=>{(0,Ua.Z)(e.data).then((()=>{at.Z.create({type:"positive",message:"已复制数据到剪贴板！"})})).catch((()=>{at.Z.create({type:"negative",message:"复制数据失败！"})}))},n=()=>{l.parent.proxy.closeCode()};return{copy:o,close:n,showCodeDialog:t,cmOptions:{mode:"application/json",tabSize:2,matchBrackets:!0,lineNumbers:!0,readOnly:!0}}}},Ta=(0,L.Z)(za,[["render",Da]]),Na=Ta;$()(za,"components",{QDialog:fa.Z,QCard:ka.Z,QCardSection:ga.Z,QSpace:pl.Z,QBtn:R.Z});const Ia=(0,a.Uk)("查看"),Qa=(0,a.Uk)("配置"),ja=(0,a.Uk)("添加"),Fa=(0,a.Uk)("删除"),Va=(0,a.Uk)("查看"),Ma=(0,a.Uk)("删除"),Sa=(0,a.Uk)("撤销"),Ha=(0,a.Uk)("重做"),Ea=(0,a.Uk)("查看"),La=(0,a.Uk)("导出"),Ra=(0,a.Uk)("更多"),Ba=(0,a.Uk)("清空");function Oa(e,l,t,o,n,i){const s=(0,a.up)("q-item-section"),d=(0,a.up)("q-item"),c=(0,a.up)("q-separator"),r=(0,a.up)("q-list"),u=(0,a.up)("q-icon"),p=(0,a.up)("q-menu"),m=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)("div",null,["node"==t.choiceType?((0,a.wg)(),(0,a.j4)(r,{key:0,dense:"",style:{"min-width":"100px"}},{default:(0,a.w5)((()=>[(0,a.wy)(((0,a.wg)(),(0,a.j4)(d,{clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{onClick:o.showNode},{default:(0,a.w5)((()=>[Ia])),_:1},8,["onClick"])])),_:1})),[[m]]),(0,a.wy)(((0,a.wg)(),(0,a.j4)(d,{clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{onClick:o.nodeSetting},{default:(0,a.w5)((()=>[Qa])),_:1},8,["onClick"])])),_:1})),[[m]]),(0,a.Wm)(c),(0,a.wy)(((0,a.wg)(),(0,a.j4)(d,{clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{onClick:e.addNode},{default:(0,a.w5)((()=>[ja])),_:1},8,["onClick"])])),_:1})),[[m]]),(0,a.Wm)(c),(0,a.wy)(((0,a.wg)(),(0,a.j4)(d,{clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{onClick:o.deleteNode},{default:(0,a.w5)((()=>[Fa])),_:1},8,["onClick"])])),_:1})),[[m]])])),_:1})):(0,a.kq)("",!0),"edge"==t.choiceType?((0,a.wg)(),(0,a.j4)(r,{key:1,dense:"",style:{"min-width":"100px"}},{default:(0,a.w5)((()=>[(0,a.wy)(((0,a.wg)(),(0,a.j4)(d,{clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{onClick:e.showEdge},{default:(0,a.w5)((()=>[Va])),_:1},8,["onClick"])])),_:1})),[[m]]),(0,a.Wm)(c),(0,a.wy)(((0,a.wg)(),(0,a.j4)(d,{clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{onClick:o.deleteEdge},{default:(0,a.w5)((()=>[Ma])),_:1},8,["onClick"])])),_:1})),[[m]])])),_:1})):(0,a.kq)("",!0),"blank"==t.choiceType?((0,a.wg)(),(0,a.j4)(r,{key:2,dense:"",style:{"min-width":"100px"}},{default:(0,a.w5)((()=>[(0,a.wy)(((0,a.wg)(),(0,a.j4)(d,{clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{onClick:o.undo},{default:(0,a.w5)((()=>[Sa])),_:1},8,["onClick"])])),_:1})),[[m]]),(0,a.wy)(((0,a.wg)(),(0,a.j4)(d,{clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{onClick:o.redo},{default:(0,a.w5)((()=>[Ha])),_:1},8,["onClick"])])),_:1})),[[m]]),(0,a.Wm)(c),(0,a.wy)(((0,a.wg)(),(0,a.j4)(d,{clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{onClick:o.showData},{default:(0,a.w5)((()=>[Ea])),_:1},8,["onClick"])])),_:1})),[[m]]),(0,a.wy)(((0,a.wg)(),(0,a.j4)(d,{clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{onClick:o.downloadData},{default:(0,a.w5)((()=>[La])),_:1},8,["onClick"])])),_:1})),[[m]]),(0,a.Wm)(c),(0,a.Wm)(d,{clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[Ra])),_:1}),(0,a.Wm)(s,{side:""},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{name:"keyboard_arrow_right"})])),_:1}),(0,a.Wm)(p,{anchor:"top end",self:"top start"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{dense:"",style:{"min-width":"100px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{onClick:o.refresh},{default:(0,a.w5)((()=>[Ba])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})):(0,a.kq)("",!0)])}const Ga={props:{choiceType:{type:String}},setup(){const e=(0,a.FN)();console.log(e);const l=()=>{e.proxy.showNode()},t=()=>{e.proxy.nodeSetting()},o=()=>{e.proxy.undo()},n=()=>{e.proxy.deleteEdge()},i=()=>{e.proxy.undo()},s=()=>{e.proxy.redo()},d=()=>{e.proxy.showData()},c=()=>{e.proxy.downloadData()},r=()=>{e.proxy.refresh()};return{showNode:l,nodeSetting:t,deleteNode:o,deleteEdge:n,undo:i,redo:s,showData:d,downloadData:c,refresh:r}}},Aa=(0,L.Z)(Ga,[["render",Oa],["__scopeId","data-v-765fad70"]]),Pa=Aa;$()(Ga,"components",{QList:G.Z,QItem:A.Z,QItemSection:P.Z,QSeparator:Y.Z,QIcon:J.Z,QMenu:Se.Z}),$()(Ga,"directives",{ClosePopup:K.Z});const{Dnd:Ja}=b.e9,Ya=(0,a.aZ)({components:{Header:Le,ToolBar:le,LeftDrawer:kl,RightDrawer:pt,HelpDialog:Wa,CodeDialog:Na,ContextMenu:Pa},setup(){const e=(0,h.Z)();let l;const t=(0,v.iH)({}),o=(0,v.iH)(""),n=(0,v.iH)(""),i=(0,v.iH)(),s=(0,v.iH)(100),d=(0,v.iH)(!0),c=(0,v.iH)(!0),r=(0,v.iH)(!1),u=(0,v.iH)(!1),p=(0,v.iH)({}),m=(0,v.iH)(!1),w=(0,v.iH)(!1),f={groups:{top:{position:"top",attrs:{circle:{r:4,magnet:!0,stroke:"#c2c8d5",strokeWidth:1.5,fill:"#fff"}}},bottom:{position:"bottom",attrs:{circle:{r:4,magnet:!0,stroke:"#c2c8d5",strokeWidth:1.5,fill:"#fff"}}}},items:[{group:"top"},{group:"bottom"}]};let k={name:"测试工作流20220128-1",externalId:"w-workflow-20220128",materialName:"w",jobs:[{externalId:"fe94ef60-b536-22bb-61fd-6b3a2222be17",cpuCores:"2",appUseCase:"ab08ad37-055b-b368-58aa-037620228cf8",name:"Simulate1脚本",htc:!1},{externalId:"4557647d-19bc-b1d7-5aec-4963dfe83b28",cpuCores:"1",appUseCase:"f30223f0-a215-4402-38ba-067a917b095d",name:"Simulate2脚本",htc:!1},{externalId:"35344a12-c8d7-1e2c-704f-b10a9b56e2c6",cpuCores:"2",appUseCase:"c0121580-1097-418f-14be-170e474fb8d3",name:"Simulate3脚本",htc:!0},{externalId:"8c6f878b-ffa0-e51b-93d2-0e65344d7f56",cpuCores:"2",appUseCase:"f4f1357b-1bfc-6797-5030-b9822d910e73",name:"Simulate4脚本",htc:!1},{externalId:"ba2f49b7-912e-de79-50a3-8e6d4083f681",cpuCores:"1",appUseCase:"1d6913e0-32bd-4563-a073-4900579da937",name:"Simulate5脚本",htc:!1},{externalId:"7a65b4d8-12bd-bd09-170c-cf37cc0a568a",cpuCores:"2",appUseCase:"81abf716-a0f8-f064-cabe-6e4e44442825",name:"Simulate6脚本",htc:!1}],dependencies:[{externalId:"ba832c2b-7ff3-4b24-be99-53ad0f949161",jobExternalId:"4557647d-19bc-b1d7-5aec-4963dfe83b28",jobDependencyExternalId:"fe94ef60-b536-22bb-61fd-6b3a2222be17",fileDependencies:[{targetAppFile:"0a9c2cb6-3dc7-9a00-55f1-33f2e31f5561",dependencyAppFile:"2ae998c2-7a33-65a4-a9b1-07a101ec695c",dependencyType:"appFile"},{targetAppFile:"d499e05c-a1a1-f365-184a-06f64438d81f",dependencyAppFile:"f055da12-e175-3f38-c2df-4a589ddc5db9",dependencyType:"appFile"}]},{externalId:"6201ebaf-5c4a-4211-a9ca-7ecb367c9e25",jobExternalId:"35344a12-c8d7-1e2c-704f-b10a9b56e2c6",jobDependencyExternalId:"fe94ef60-b536-22bb-61fd-6b3a2222be17",fileDependencies:[{targetAppFile:"b098bf40-eb8c-30d8-ef16-8f21ab41b248",dependencyAppFile:"1191f899-eaad-b87c-8936-5cf96d72d1c4",dependencyType:"appFile"}]},{externalId:"a5b8558d-12c8-4ec8-a69f-cbcc7e1dbea7",jobExternalId:"8c6f878b-ffa0-e51b-93d2-0e65344d7f56",jobDependencyExternalId:"4557647d-19bc-b1d7-5aec-4963dfe83b28",fileDependencies:[{targetAppFile:"56c90586-a686-5330-0b16-72a231212171",dependencyAppFile:"56984e29-f833-adae-9253-882e255d2e3b",dependencyType:"appFile"}]},{externalId:"9eda6ea8-d91b-4b1c-9cfb-4a46be11b698",jobExternalId:"ba2f49b7-912e-de79-50a3-8e6d4083f681",jobDependencyExternalId:"4557647d-19bc-b1d7-5aec-4963dfe83b28"},{externalId:"080cf216-4e96-4b31-b664-8666e3f98b41",jobExternalId:"7a65b4d8-12bd-bd09-170c-cf37cc0a568a",jobDependencyExternalId:"35344a12-c8d7-1e2c-704f-b10a9b56e2c6"}]};const y=(0,v.iH)({name:"",id:"",materialName:""});let x={nodes:[],edges:[]};const W=()=>{l.undo()},C=()=>{l.redo()},q=()=>{s.value<=280&&(l.zoom(.2),setTimeout((()=>{s.value=Number((100*l.zoom()).toFixed(0))}),50))},D=()=>{s.value>=70&&(l.zoom(-.2),setTimeout((()=>{s.value=Number((100*l.zoom()).toFixed(0))}),50))},U=e=>{l.zoomTo(e),setTimeout((()=>{s.value=Number((100*l.zoom()).toFixed(0))}),50)},Z=()=>{l.zoomToFit(),setTimeout((()=>{s.value=Number((100*l.zoom()).toFixed(0))}),50)},z=()=>{l.centerContent()},T=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var l=16*Math.random()|0,t="x"==e?l:3&l|8;return t.toString(16)})),N=()=>{const t=l.toJSON().cells.find((e=>e.id==o.value)),a=T();l.addNode({id:a,data:{name:"未命名节点",cpuCores:"",appUseCase:"",status:"default",htc:!1},shape:"default-node",ports:{...f},x:null===t||void 0===t?void 0:t.position.x,y:(null===t||void 0===t?void 0:t.position.y)+160}),l.addEdge({source:null===t||void 0===t?void 0:t.id,target:a,shape:"default-edge",zIndex:-1}),oe(),e.notify({message:"添加节点成功！进行自动布局？",type:"positive",multiLine:!0,actions:[{label:"否",color:"white",handler:()=>{}},{label:"是",color:"yellow",handler:()=>{A()}}]})},I=()=>{l.removeNode(o.value),e.notify({message:"删除节点成功！",type:"positive"})},Q=()=>{l.removeEdge(o.value),e.notify({message:"删除连线成功！",type:"positive"})},j=()=>{l.clearCells(),e.notify({message:"清空画布成功！",type:"positive"})},F=()=>{e.dialog({options:{title:"配置",type:"radio",model:"opt1",items:[{label:"使用本地参数文件",value:"opt1",color:"secondary"},{label:"在线配置参数",value:"opt2"}]},ok:"继续",cancel:"取消"}).onOk((l=>{e.notify({message:"选择了 "+l,color:"primary"})}))},V=()=>{S(),p.value=JSON.stringify(p.value.jobs.find((e=>e.externalId==o.value)),null,2),u.value=!0},M=()=>{S(),p.value=JSON.stringify(p.value.dependencies.find((e=>e.externalId==o.value)),null,2),u.value=!0},S=()=>{const e=l.toJSON().cells;let t=[],a=[];for(let l=0,o=e.length;l<o;l++)"default-edge"===e[l].shape?a.push({externalId:e[l].id,jobExternalId:e[l].target.cell,jobDependencyExternalId:e[l].source.cell,fileDependencies:e[l].fileDependencies}):t.push({externalId:e[l].id,cpuCores:e[l].data.cpuCores,appUseCase:e[l].data.appUseCase,name:e[l].data.name,htc:e[l].data.htc});p.value={name:y.value.name,externalId:y.value.id,materialName:y.value.materialName,jobs:t,dependencies:a}},H=()=>{S(),p.value=JSON.stringify(p.value,null,2),u.value=!0},E=()=>{u.value=!1},L=()=>{e.dialog({title:"提示",message:"确定要下载该流程数据吗？",ok:"确定",cancel:"取消",persistent:!0}).onOk((()=>{S();const l="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(p.value,null,"\t")),t=document.createElement("a");t.setAttribute("href",l),t.setAttribute("download","data"+_.ZP.formatDate(new Date,"YYYYMMDDHHmm")+".json"),t.click(),t.remove(),e.notify({message:"正在下载中，请稍候...",color:"primary"})}))},R=()=>{r.value=!0},B=()=>{r.value=!1},O=()=>{!0===w.value?l.hideGrid():l.showGrid(),w.value=!w.value},G=()=>{m.value=!m.value},A=()=>{S(),k=p.value,K(),l.dispose(),$(),ee(),le(),z()},P=()=>{d.value=!d.value,!0===d.value&&!0===c.value?l.resize(window.innerWidth-600,window.innerHeight-52):!0===d.value&&!1===c.value||!1===d.value&&!0===c.value?l.resize(window.innerWidth-300,window.innerHeight-52):l.resize(window.innerWidth,window.innerHeight-52)};function J(){c.value=!c.value,!0===d.value&&!0===c.value?l.resize(window.innerWidth-600,window.innerHeight-52):!0===d.value&&!1===c.value||!1===d.value&&!0===c.value?l.resize(window.innerWidth-300,window.innerHeight-52):l.resize(window.innerWidth,window.innerHeight-52)}const Y=(e,a)=>{const o=l.createNode(a.node);t.value.start(o,e)},K=()=>{if(k.name&&(y.value.name=k.name),k.externalId&&(y.value.id=k.externalId),k.materialName&&(y.value.materialName=k.materialName),0!==k.jobs.length){const e=k.jobs;for(let l=0,t=e.length;l<t;l++)x.nodes.push({id:e[l].externalId,data:{name:e[l].name,cpuCores:e[l].cpuCores,appUseCase:e[l].appUseCase,status:"default",htc:e[l].htc},shape:"default-node",ports:{...f}})}if(0!==k.dependencies.length){const e=k.dependencies;for(let l=0,t=e.length;l<t;l++)x.edges.push({id:e[l].externalId,source:e[l].jobDependencyExternalId,target:e[l].jobExternalId,fileDependencies:e[l].fileDependencies,shape:"default-edge",zIndex:-1})}},X=()=>{b.kJ.registerNode("default-node",{inherit:"vue-shape",width:200,height:36,component:Kt},!0),b.kJ.registerEdge("default-edge",{inherit:"edge",attrs:{line:{stroke:"#c2c8d5",strokeWidth:1.5,targetMarker:{name:"path",offsetX:-5,d:"M10.3,11.9L10.3,6.29L10.3,5.6L10.3,0L0,5.95L10.3,11.9Z"}}}},!0)};function $(){const e=new g.Vq({type:"dagre",ranksep:40,nodesep:60,controlPoints:!1});e.layout(x);const t={name:"stroke"};l=new b.kJ({container:document.getElementById("container"),autoResize:!0,minimap:{enabled:!0,container:document.getElementById("minimap"),width:266,height:198},height:window.innerHeight-52,background:{color:"#f7f7fa"},grid:{size:10,visible:w.value,type:"dot",args:{color:"#a0a0a0",thickness:1}},snapline:!0,panning:!0,keyboard:!1,mousewheel:{enabled:!0,zoomAtMousePosition:!0,modifiers:"ctrl",minScale:.5,maxScale:3},history:{enabled:!0,ignoreChange:!0},selecting:{enabled:!0,multiple:!1,rubberEdge:!0,showNodeSelectionBox:!0,showEdgeSelectionBox:!0},connecting:{allowPort:!0,allowEdge:!1,allowNode:!1,allowLoop:!1,allowMulti:!1,allowBlank:!1,highlight:!0,snap:!0,router:{name:"er",args:{offset:"center",direction:"V"}},connector:{name:"rounded",args:{radius:45}},anchor:"center",connectionPoint:{name:"bbox"},validateConnection({targetMagnet:e,sourceCell:t,targetCell:a}){const o=l.toJSON().cells.find((e=>{if("edge"===e.shape&&e.target.cell===t.id&&e.source.cell===a.id)return!0}));return!o&&!!e},createEdge(){return l.createEdge({shape:"default-edge",attrs:{line:{strokeDasharray:"5 5"}},zIndex:-1})}},highlighting:{magnetAvailable:t,magnetAdsorbed:{name:"stroke",args:{attrs:{fill:"#fff",stroke:"#31d0c6"}}}}}).fromJSON(x)}const ee=()=>{t.value=new Ja({target:l,validateNode(){return!0}})};function le(){l.on("node:contextmenu",(({node:e})=>{n.value="node",o.value=e.id})),l.on("edge:contextmenu",(({edge:e})=>{n.value="edge",o.value=e.id})),l.on("blank:contextmenu",(()=>{n.value="blank",o.value=""})),l.on("cell:mousewheel",(()=>{setTimeout((()=>{s.value=Number((100*l.zoom()).toFixed(0))}),50)})),l.on("blank:mousewheel",(()=>{setTimeout((()=>{s.value=Number((100*l.zoom()).toFixed(0))}),50)})),l.on("node:click",(({node:e})=>{i.value.nodeClickResponse(e),console.log("node",e)})),l.on("edge:click",(({edge:e})=>{i.value.edgeClickResponse(e),console.log("edge",e)})),l.on("blank:click",(({})=>{i.value.blankClickResponse()})),l.on("node:mousemove",(({node:e})=>{i.value.nodeMouseMoveResponse(e)})),l.on("edge:connected",(({edge:e})=>{e.attr({line:{strokeDasharray:""}})})),l.on("node:change:data",(({node:e})=>{const t=e.getData(),a=l.getIncomingEdges(e),o=l.getOutgoingEdges(e);console.log(o),null===a||void 0===a||a.forEach((e=>{"running"===t.status?(e.attr("line/strokeDasharray",5),e.attr("line/style/animation","running-line 30s infinite linear")):(e.attr("line/strokeDasharray",""),e.attr("line/style/animation",""))})),null===o||void 0===o||o.forEach((e=>{!0===t.htc?(e.attr("line/strokeWidth",5),e.attr("line/targetMarker/name","path"),e.attr("line/targetMarker/offsetX",-8),e.attr("line/targetMarker/d","M5.5,15.499,15.8,21.447,15.8,15.846,25.5,21.447,25.5,9.552,15.8,15.152,15.8,9.552z")):(e.attr("line/strokeWidth",1.5),e.attr("line/targetMarker/name","path"),e.attr("line/targetMarker/offsetX",-5),e.attr("line/targetMarker/d","M10.3,11.9L10.3,6.29L10.3,5.6L10.3,0L0,5.95L10.3,11.9Z"))}))})),l.on("edge:added",(()=>{oe()}))}const te=(e,t)=>{const a=l.getNodes()[e];let o=a.getData();a.setData({name:o.name,status:t})},ae=()=>{te(0,"running"),te(1,"default"),te(2,"default"),te(3,"default"),te(4,"default"),te(5,"default"),setTimeout((()=>{te(0,"success"),te(1,"running"),te(2,"running"),setTimeout((()=>{te(1,"success"),te(3,"running"),te(4,"running"),setTimeout((()=>{te(3,"success"),setTimeout((()=>{te(4,"warning")}),3e3)}),1e3)}),1e3),setTimeout((()=>{te(2,"success"),te(5,"running"),setTimeout((()=>{te(5,"error")}),1e3)}),3e3)}),2e3)},oe=()=>{const e=l.getNodes();for(let l=0,t=e.length;l<t;l++)e[l].getData().htc&&(e[l].setData({htc:!1}),e[l].setData({htc:!0}))};return(0,a.bv)((()=>{K(),X(),$(),ee(),le(),oe(),z()})),{undo:W,redo:C,zoomIn:q,zoomOut:D,centerContent:z,choiceType:n,addNode:N,deleteNode:I,deleteEdge:Q,refresh:j,nodeSetting:F,showNode:V,showEdge:M,showData:H,downloadData:L,shGrid:O,layout:A,shLeftDrawer:P,shRightDrawer:J,showLeftDrawer:d,showRightDrawer:c,zoom:s,rightDrawer:i,startDrag:Y,runWorkFlow:ae,openHelpDialog:r,help:R,closeHelp:B,closeCode:E,openCodeDialog:u,jsonData:p,flow:y,showMinimap:m,shMinimap:G,showGrid:w,zoomTo:U,zoomToFit:Z}}}),Ka=(0,L.Z)(Ya,[["render",k],["__scopeId","data-v-4afa7285"]]),Xa=Ka;$()(Ya,"components",{QMenu:Se.Z,QList:G.Z,QItem:A.Z,QItemSection:P.Z,QSeparator:Y.Z,QIcon:J.Z}),$()(Ya,"directives",{ClosePopup:K.Z});const $a=(0,a.aZ)({name:"PageIndex",components:{X6Editor:Xa},setup(){return{}}}),eo=(0,L.Z)($a,[["render",o]]),lo=eo}}]);